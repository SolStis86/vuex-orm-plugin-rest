import os from"os";import tty from"tty";import http from"http";import https from"https";import stream from"stream";import zlib from"zlib";var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function __extends(t,e){function r(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function __awaiter(t,e,r,n){return new(r||(r=Promise))(function(o,i){function s(t){try{u(n.next(t))}catch(t){i(t)}}function a(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(s,a)}u((n=n.apply(t,e||[])).next())})}function __generator(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}var bind=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}},isBuffer_1=function(t){return null!=t&&(isBuffer(t)||isSlowBuffer(t)||!!t._isBuffer)};function isBuffer(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function isSlowBuffer(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&isBuffer(t.slice(0,0))}var toString=Object.prototype.toString;function isArray(t){return"[object Array]"===toString.call(t)}function isArrayBuffer(t){return"[object ArrayBuffer]"===toString.call(t)}function isFormData(t){return"undefined"!=typeof FormData&&t instanceof FormData}function isArrayBufferView(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function isString(t){return"string"==typeof t}function isNumber(t){return"number"==typeof t}function isUndefined(t){return void 0===t}function isObject(t){return null!==t&&"object"==typeof t}function isDate(t){return"[object Date]"===toString.call(t)}function isFile(t){return"[object File]"===toString.call(t)}function isBlob(t){return"[object Blob]"===toString.call(t)}function isFunction(t){return"[object Function]"===toString.call(t)}function isStream(t){return isObject(t)&&isFunction(t.pipe)}function isURLSearchParams(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}function trim(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function forEach(t,e){if(null!==t&&void 0!==t)if("object"!=typeof t&&(t=[t]),isArray(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}function merge(){var t={};function e(e,r){"object"==typeof t[r]&&"object"==typeof e?t[r]=merge(t[r],e):t[r]=e}for(var r=0,n=arguments.length;r<n;r++)forEach(arguments[r],e);return t}function extend(t,e,r){return forEach(e,function(e,n){t[n]=r&&"function"==typeof e?bind(e,r):e}),t}var utils={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer_1,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,extend:extend,trim:trim},normalizeHeaderName=function(t,e){utils.forEach(t,function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])})},enhanceError=function(t,e,r,n,o){return t.config=e,r&&(t.code=r),t.request=n,t.response=o,t},createError=function(t,e,r,n,o){var i=new Error(t);return enhanceError(i,e,r,n,o)},settle=function(t,e,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?e(createError("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)};function encode(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL=function(t,e,r){if(!e)return t;var n;if(r)n=r(e);else if(utils.isURLSearchParams(e))n=e.toString();else{var o=[];utils.forEach(e,function(t,e){null!==t&&void 0!==t&&(utils.isArray(t)?e+="[]":t=[t],utils.forEach(t,function(t){utils.isDate(t)?t=t.toISOString():utils.isObject(t)&&(t=JSON.stringify(t)),o.push(encode(e)+"="+encode(t))}))}),n=o.join("&")}return n&&(t+=(-1===t.indexOf("?")?"?":"&")+n),t},ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders=function(t){var e,r,n,o={};return t?(utils.forEach(t.split("\n"),function(t){if(n=t.indexOf(":"),e=utils.trim(t.substr(0,n)).toLowerCase(),r=utils.trim(t.substr(n+1)),e){if(o[e]&&ignoreDuplicateOf.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([r]):o[e]?o[e]+", "+r:r}}),o):o},isURLSameOrigin=utils.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=n(window.location.href),function(e){var r=utils.isString(e)?n(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0},chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function E(){this.message="String contains an invalid character"}function btoa(t){for(var e,r,n=String(t),o="",i=0,s=chars;n.charAt(0|i)||(s="=",i%1);o+=s.charAt(63&e>>8-i%1*8)){if((r=n.charCodeAt(i+=.75))>255)throw new E;e=e<<8|r}return o}E.prototype=new Error,E.prototype.code=5,E.prototype.name="InvalidCharacterError";var btoa_1=btoa,cookies=utils.isStandardBrowserEnv()?{write:function(t,e,r,n,o,i){var s=[];s.push(t+"="+encodeURIComponent(e)),utils.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),utils.isString(n)&&s.push("path="+n),utils.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},btoa$1="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||btoa_1,xhr=function(t){return new Promise(function(e,r){var n=t.data,o=t.headers;utils.isFormData(n)&&delete o["Content-Type"];var i=new XMLHttpRequest,s="onreadystatechange",a=!1;if("test"===process.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in i||isURLSameOrigin(t.url)||(i=new window.XDomainRequest,s="onload",a=!0,i.onprogress=function(){},i.ontimeout=function(){}),t.auth){var u=t.auth.username||"",c=t.auth.password||"";o.Authorization="Basic "+btoa$1(u+":"+c)}if(i.open(t.method.toUpperCase(),buildURL(t.url,t.params,t.paramsSerializer),!0),i.timeout=t.timeout,i[s]=function(){if(i&&(4===i.readyState||a)&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in i?parseHeaders(i.getAllResponseHeaders()):null,o={data:t.responseType&&"text"!==t.responseType?i.response:i.responseText,status:1223===i.status?204:i.status,statusText:1223===i.status?"No Content":i.statusText,headers:n,config:t,request:i};settle(e,r,o),i=null}},i.onerror=function(){r(createError("Network Error",t,null,i)),i=null},i.ontimeout=function(){r(createError("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",i)),i=null},utils.isStandardBrowserEnv()){var l=cookies,f=(t.withCredentials||isURLSameOrigin(t.url))&&t.xsrfCookieName?l.read(t.xsrfCookieName):void 0;f&&(o[t.xsrfHeaderName]=f)}if("setRequestHeader"in i&&utils.forEach(o,function(t,e){void 0===n&&"content-type"===e.toLowerCase()?delete o[e]:i.setRequestHeader(e,t)}),t.withCredentials&&(i.withCredentials=!0),t.responseType)try{i.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&i.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){i&&(i.abort(),r(t),i=null)}),void 0===n&&(n=null),i.send(n)})},commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}function getCjsExportFromNamespace(t){return t&&t.default||t}var punycode=createCommonjsModule(function(t,e){!function(r){var n=e&&!e.nodeType&&e,o=t&&!t.nodeType&&t,i="object"==typeof commonjsGlobal&&commonjsGlobal;i.global!==i&&i.window!==i&&i.self!==i||(r=i);var s,a,u=2147483647,c=36,l=1,f=26,h=38,p=700,d=72,y=128,m="-",g=/^xn--/,v=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=c-l,O=Math.floor,j=String.fromCharCode;function x(t){throw RangeError(_[t])}function $(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function C(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+$((t=t.replace(b,".")).split("."),e).join(".")}function E(t){for(var e,r,n=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(r=t.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--):n.push(e);return n}function R(t){return $(t,function(t){var e="";return t>65535&&(e+=j((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=j(t)}).join("")}function S(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function A(t,e,r){var n=0;for(t=r?O(t/p):t>>1,t+=O(t/e);t>w*f>>1;n+=c)t=O(t/w);return O(n+(w+1)*t/(t+h))}function k(t){var e,r,n,o,i,s,a,h,p,g,v,b=[],_=t.length,w=0,j=y,$=d;for((r=t.lastIndexOf(m))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&x("not-basic"),b.push(t.charCodeAt(n));for(o=r>0?r+1:0;o<_;){for(i=w,s=1,a=c;o>=_&&x("invalid-input"),((h=(v=t.charCodeAt(o++))-48<10?v-22:v-65<26?v-65:v-97<26?v-97:c)>=c||h>O((u-w)/s))&&x("overflow"),w+=h*s,!(h<(p=a<=$?l:a>=$+f?f:a-$));a+=c)s>O(u/(g=c-p))&&x("overflow"),s*=g;$=A(w-i,e=b.length+1,0==i),O(w/e)>u-j&&x("overflow"),j+=O(w/e),w%=e,b.splice(w++,0,j)}return R(b)}function F(t){var e,r,n,o,i,s,a,h,p,g,v,b,_,w,$,C=[];for(b=(t=E(t)).length,e=y,r=0,i=d,s=0;s<b;++s)(v=t[s])<128&&C.push(j(v));for(n=o=C.length,o&&C.push(m);n<b;){for(a=u,s=0;s<b;++s)(v=t[s])>=e&&v<a&&(a=v);for(a-e>O((u-r)/(_=n+1))&&x("overflow"),r+=(a-e)*_,e=a,s=0;s<b;++s)if((v=t[s])<e&&++r>u&&x("overflow"),v==e){for(h=r,p=c;!(h<(g=p<=i?l:p>=i+f?f:p-i));p+=c)$=h-g,w=c-g,C.push(j(S(g+$%w,0))),h=O($/w);C.push(j(S(h,0))),i=A(r,_,n==o),r=0,++n}++r,++e}return C.join("")}if(s={version:"1.3.2",ucs2:{decode:E,encode:R},decode:k,encode:F,toASCII:function(t){return C(t,function(t){return v.test(t)?"xn--"+F(t):t})},toUnicode:function(t){return C(t,function(t){return g.test(t)?k(t.slice(4).toLowerCase()):t})}},n&&o)if(t.exports==n)o.exports=s;else for(a in s)s.hasOwnProperty(a)&&(n[a]=s[a]);else r.punycode=s}(commonjsGlobal)}),util={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}};function hasOwnProperty(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var decode=function(t,e,r,n){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var i=/\+/g;t=t.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var a=t.length;s>0&&a>s&&(a=s);for(var u=0;u<a;++u){var c,l,f,h,p=t[u].replace(i,"%20"),d=p.indexOf(r);d>=0?(c=p.substr(0,d),l=p.substr(d+1)):(c=p,l=""),f=decodeURIComponent(c),h=decodeURIComponent(l),hasOwnProperty(o,f)?Array.isArray(o[f])?o[f].push(h):o[f]=[o[f],h]:o[f]=h}return o},stringifyPrimitive=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},encode$1=function(t,e,r,n){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(n){var o=encodeURIComponent(stringifyPrimitive(n))+r;return Array.isArray(t[n])?t[n].map(function(t){return o+encodeURIComponent(stringifyPrimitive(t))}).join(e):o+encodeURIComponent(stringifyPrimitive(t[n]))}).join(e):n?encodeURIComponent(stringifyPrimitive(n))+r+encodeURIComponent(stringifyPrimitive(t)):""},querystring=createCommonjsModule(function(t,e){e.decode=e.parse=decode,e.encode=e.stringify=encode$1}),querystring_1=querystring.decode,querystring_2=querystring.parse,querystring_3=querystring.encode,querystring_4=querystring.stringify,parse=urlParse,resolve=urlResolve,resolveObject=urlResolveObject,format=urlFormat,Url_1=Url;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function urlParse(t,e,r){if(t&&util.isObject(t)&&t instanceof Url)return t;var n=new Url;return n.parse(t,e,r),n}function urlFormat(t){return util.isString(t)&&(t=urlParse(t)),t instanceof Url?t.format():Url.prototype.format.call(t)}function urlResolve(t,e){return urlParse(t,!1,!0).resolve(e)}function urlResolveObject(t,e){return t?urlParse(t,!1,!0).resolveObject(e):e}Url.prototype.parse=function(t,e,r){if(!util.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),o=-1!==n&&n<t.indexOf("#")?"?":"#",i=t.split(o);i[0]=i[0].replace(/\\/g,"/");var s=t=i.join(o);if(s=s.trim(),!r&&1===t.split("#").length){var a=simplePathPattern.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?querystring.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=protocolPattern.exec(s);if(u){var c=(u=u[0]).toLowerCase();this.protocol=c,s=s.substr(u.length)}if(r||u||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===s.substr(0,2);!l||u&&hostlessProtocol[u]||(s=s.substr(2),this.slashes=!0)}if(!hostlessProtocol[u]&&(l||u&&!slashedProtocol[u])){for(var f,h,p=-1,d=0;d<hostEndingChars.length;d++){-1!==(y=s.indexOf(hostEndingChars[d]))&&(-1===p||y<p)&&(p=y)}-1!==(h=-1===p?s.lastIndexOf("@"):s.lastIndexOf("@",p))&&(f=s.slice(0,h),s=s.slice(h+1),this.auth=decodeURIComponent(f)),p=-1;for(d=0;d<nonHostChars.length;d++){var y;-1!==(y=s.indexOf(nonHostChars[d]))&&(-1===p||y<p)&&(p=y)}-1===p&&(p=s.length),this.host=s.slice(0,p),s=s.slice(p),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var g=this.hostname.split(/\./),v=(d=0,g.length);d<v;d++){var b=g[d];if(b&&!b.match(hostnamePartPattern)){for(var _="",w=0,O=b.length;w<O;w++)b.charCodeAt(w)>127?_+="x":_+=b[w];if(!_.match(hostnamePartPattern)){var j=g.slice(0,d),x=g.slice(d+1),$=b.match(hostnamePartStart);$&&(j.push($[1]),x.unshift($[2])),x.length&&(s="/"+x.join(".")+s),this.hostname=j.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),m||(this.hostname=punycode.toASCII(this.hostname));var C=this.port?":"+this.port:"",E=this.hostname||"";this.host=E+C,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!unsafeProtocol[c])for(d=0,v=autoEscape.length;d<v;d++){var R=autoEscape[d];if(-1!==s.indexOf(R)){var S=encodeURIComponent(R);S===R&&(S=escape(R)),s=s.split(R).join(S)}}var A=s.indexOf("#");-1!==A&&(this.hash=s.substr(A),s=s.slice(0,A));var k=s.indexOf("?");if(-1!==k?(this.search=s.substr(k),this.query=s.substr(k+1),e&&(this.query=querystring.parse(this.query)),s=s.slice(0,k)):e&&(this.search="",this.query={}),s&&(this.pathname=s),slashedProtocol[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){C=this.pathname||"";var F=this.search||"";this.path=C+F}return this.href=this.format(),this},Url.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(i=querystring.stringify(this.query));var s=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||slashedProtocol[e])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+n},Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()},Url.prototype.resolveObject=function(t){if(util.isString(t)){var e=new Url;e.parse(t,!1,!0),t=e}for(var r=new Url,n=Object.keys(this),o=0;o<n.length;o++){var i=n[o];r[i]=this[i]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),a=0;a<s.length;a++){var u=s[a];"protocol"!==u&&(r[u]=t[u])}return slashedProtocol[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!slashedProtocol[t.protocol]){for(var c=Object.keys(t),l=0;l<c.length;l++){var f=c[l];r[f]=t[f]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||hostlessProtocol[t.protocol])r.pathname=t.pathname;else{for(var h=(t.pathname||"").split("/");h.length&&!(t.host=h.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),r.pathname=h.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var p=r.pathname||"",d=r.search||"";r.path=p+d}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var y=r.pathname&&"/"===r.pathname.charAt(0),m=t.host||t.pathname&&"/"===t.pathname.charAt(0),g=m||y||r.host&&t.pathname,v=g,b=r.pathname&&r.pathname.split("/")||[],_=(h=t.pathname&&t.pathname.split("/")||[],r.protocol&&!slashedProtocol[r.protocol]);if(_&&(r.hostname="",r.port=null,r.host&&(""===b[0]?b[0]=r.host:b.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===h[0]?h[0]=t.host:h.unshift(t.host)),t.host=null),g=g&&(""===h[0]||""===b[0])),m)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,b=h;else if(h.length)b||(b=[]),b.pop(),b=b.concat(h),r.search=t.search,r.query=t.query;else if(!util.isNullOrUndefined(t.search)){if(_)r.hostname=r.host=b.shift(),($=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=$.shift(),r.host=r.hostname=$.shift());return r.search=t.search,r.query=t.query,util.isNull(r.pathname)&&util.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!b.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var w=b.slice(-1)[0],O=(r.host||t.host||b.length>1)&&("."===w||".."===w)||""===w,j=0,x=b.length;x>=0;x--)"."===(w=b[x])?b.splice(x,1):".."===w?(b.splice(x,1),j++):j&&(b.splice(x,1),j--);if(!g&&!v)for(;j--;j)b.unshift("..");!g||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),O&&"/"!==b.join("/").substr(-1)&&b.push("");var $,C=""===b[0]||b[0]&&"/"===b[0].charAt(0);_&&(r.hostname=r.host=C?"":b.length?b.shift():"",($=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=$.shift(),r.host=r.hostname=$.shift()));return(g=g||r.host&&b.length)&&!C&&b.unshift(""),b.length?r.pathname=b.join("/"):(r.pathname=null,r.path=null),util.isNull(r.pathname)&&util.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},Url.prototype.parseHost=function(){var t=this.host,e=portPattern.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var url={parse:parse,resolve:resolve,resolveObject:resolveObject,format:format,Url:Url_1},getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty$1=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function shouldUseNative(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}var objectAssign=shouldUseNative()?Object.assign:function(t,e){for(var r,n,o=toObject(t),i=1;i<arguments.length;i++){for(var s in r=Object(arguments[i]))hasOwnProperty$1.call(r,s)&&(o[s]=r[s]);if(getOwnPropertySymbols){n=getOwnPropertySymbols(r);for(var a=0;a<n.length;a++)propIsEnumerable.call(r,n[a])&&(o[n[a]]=r[n[a]])}}return o},isBuffer$1=function(t){return t instanceof Buffer},inherits=util$1.inherits,util$1=createCommonjsModule(function(t,e){var r=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}n=1;for(var o=arguments,s=o.length,a=String(t).replace(r,function(t){if("%%"===t)return"%";if(n>=s)return t;switch(t){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return t}}),u=o[n];n<s;u=o[++n])p(u)||!v(u)?a+=" "+u:a+=" "+i(u);return a},e.deprecate=function(t,r){if(m(commonjsGlobal.process))return function(){return e.deprecate(t,r).apply(this,arguments)};if(!0===process.noDeprecation)return t;var n=!1;return function(){if(!n){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),n=!0}return t.apply(this,arguments)}};var n,o={};function i(t,r){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),h(r)?n.showHidden=r:r&&e._extend(n,r),m(n.showHidden)&&(n.showHidden=!1),m(n.depth)&&(n.depth=2),m(n.colors)&&(n.colors=!1),m(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=s),u(n,t,n.depth)}function s(t,e){var r=i.styles[e];return r?"["+i.colors[r][0]+"m"+t+"["+i.colors[r][1]+"m":t}function a(t,e){return t}function u(t,r,n){if(t.customInspect&&r&&w(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,t);return y(o)||(o=u(t,o,n)),o}var i=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(y(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(d(e))return t.stylize(""+e,"number");if(h(e))return t.stylize(""+e,"boolean");if(p(e))return t.stylize("null","null")}(t,r);if(i)return i;var s=Object.keys(r),a=function(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),_(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(r);if(0===s.length){if(w(r)){var v=r.name?": "+r.name:"";return t.stylize("[Function"+v+"]","special")}if(g(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(b(r))return t.stylize(Date.prototype.toString.call(r),"date");if(_(r))return c(r)}var O,j="",x=!1,C=["{","}"];(f(r)&&(x=!0,C=["[","]"]),w(r))&&(j=" [Function"+(r.name?": "+r.name:"")+"]");return g(r)&&(j=" "+RegExp.prototype.toString.call(r)),b(r)&&(j=" "+Date.prototype.toUTCString.call(r)),_(r)&&(j=" "+c(r)),0!==s.length||x&&0!=r.length?n<0?g(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),O=x?function(t,e,r,n,o){for(var i=[],s=0,a=e.length;s<a;++s)$(e,String(s))?i.push(l(t,e,r,n,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(l(t,e,r,n,o,!0))}),i}(t,r,n,a,s):s.map(function(e){return l(t,r,n,a,e,x)}),t.seen.pop(),function(t,e,r){if(t.reduce(function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(O,j,C)):C[0]+j+C[1]}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,r,n,o,i){var s,a,c;if((c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),$(n,o)||(s="["+o+"]"),a||(t.seen.indexOf(c.value)<0?(a=p(r)?u(t,c.value,null):u(t,c.value,r-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),m(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function f(t){return Array.isArray(t)}function h(t){return"boolean"==typeof t}function p(t){return null===t}function d(t){return"number"==typeof t}function y(t){return"string"==typeof t}function m(t){return void 0===t}function g(t){return v(t)&&"[object RegExp]"===O(t)}function v(t){return"object"==typeof t&&null!==t}function b(t){return v(t)&&"[object Date]"===O(t)}function _(t){return v(t)&&("[object Error]"===O(t)||t instanceof Error)}function w(t){return"function"==typeof t}function O(t){return Object.prototype.toString.call(t)}function j(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(m(n)&&(n=process.env.NODE_DEBUG||""),t=t.toUpperCase(),!o[t])if(new RegExp("\\b"+t+"\\b","i").test(n)){var r=process.pid;o[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else o[t]=function(){};return o[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=f,e.isBoolean=h,e.isNull=p,e.isNullOrUndefined=function(t){return null==t},e.isNumber=d,e.isString=y,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=m,e.isRegExp=g,e.isObject=v,e.isDate=b,e.isError=_,e.isFunction=w,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=isBuffer$1;var x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function $(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,r;console.log("%s - %s",(t=new Date,r=[j(t.getHours()),j(t.getMinutes()),j(t.getSeconds())].join(":"),[t.getDate(),x[t.getMonth()],r].join(" ")),e.format.apply(e,arguments))},e.inherits=inherits,e._extend=function(t,e){if(!e||!v(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}),util_1$1=util$1.format,util_2$1=util$1.deprecate,util_3$1=util$1.debuglog,util_4$1=util$1.inspect,util_5=util$1.isArray,util_6=util$1.isBoolean,util_7=util$1.isNull,util_8=util$1.isNullOrUndefined,util_9=util$1.isNumber,util_10=util$1.isString,util_11=util$1.isSymbol,util_12=util$1.isUndefined,util_13=util$1.isRegExp,util_14=util$1.isObject,util_15=util$1.isDate,util_16=util$1.isError,util_17=util$1.isFunction,util_18=util$1.isPrimitive,util_19=util$1.isBuffer,util_20=util$1.log,util_21=util$1.inherits,util_22=util$1._extend,assert_1=createCommonjsModule(function(t){function e(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0}function r(t){return commonjsGlobal.Buffer&&"function"==typeof commonjsGlobal.Buffer.isBuffer?commonjsGlobal.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var n=Object.prototype.hasOwnProperty,o=Array.prototype.slice,i="foo"===function(){}.name;function s(t){return Object.prototype.toString.call(t)}function a(t){return!r(t)&&("function"==typeof commonjsGlobal.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var u=t.exports=d,c=/\s*function\s+([^\(\s]*)\s*/;function l(t){if(util$1.isFunction(t)){if(i)return t.name;var e=t.toString().match(c);return e&&e[1]}}function f(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function h(t){if(i||!util$1.isFunction(t))return util$1.inspect(t);var e=l(t);return"[Function"+(e?": "+e:"")+"]"}function p(t,e,r,n,o){throw new u.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:o})}function d(t,e){t||p(t,!0,e,"==",u.ok)}function y(t,n,i,u){if(t===n)return!0;if(r(t)&&r(n))return 0===e(t,n);if(util$1.isDate(t)&&util$1.isDate(n))return t.getTime()===n.getTime();if(util$1.isRegExp(t)&&util$1.isRegExp(n))return t.source===n.source&&t.global===n.global&&t.multiline===n.multiline&&t.lastIndex===n.lastIndex&&t.ignoreCase===n.ignoreCase;if(null!==t&&"object"==typeof t||null!==n&&"object"==typeof n){if(a(t)&&a(n)&&s(t)===s(n)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===e(new Uint8Array(t.buffer),new Uint8Array(n.buffer));if(r(t)!==r(n))return!1;var c=(u=u||{actual:[],expected:[]}).actual.indexOf(t);return-1!==c&&c===u.expected.indexOf(n)||(u.actual.push(t),u.expected.push(n),function(t,e,r,n){if(null===t||void 0===t||null===e||void 0===e)return!1;if(util$1.isPrimitive(t)||util$1.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=m(t),s=m(e);if(i&&!s||!i&&s)return!1;if(i)return t=o.call(t),e=o.call(e),y(t,e,r);var a,u,c=b(t),l=b(e);if(c.length!==l.length)return!1;for(c.sort(),l.sort(),u=c.length-1;u>=0;u--)if(c[u]!==l[u])return!1;for(u=c.length-1;u>=0;u--)if(a=c[u],!y(t[a],e[a],r,n))return!1;return!0}(t,n,i,u))}return i?t===n:t==n}function m(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function g(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function v(t,e,r,n){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),o=function(t){var e;try{t()}catch(t){e=t}return e}(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!o&&p(o,r,"Missing expected exception"+n);var i="string"==typeof n,s=!t&&util$1.isError(o),a=!t&&o&&!r;if((s&&i&&g(o,r)||a)&&p(o,r,"Got unwanted exception"+n),t&&o&&r&&!g(o,r)||!t&&o)throw o}u.AssertionError=function(t){var e;this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=f(h((e=this).actual),128)+" "+e.operator+" "+f(h(e.expected),128),this.generatedMessage=!0);var r=t.stackStartFunction||p;if(Error.captureStackTrace)Error.captureStackTrace(this,r);else{var n=new Error;if(n.stack){var o=n.stack,i=l(r),s=o.indexOf("\n"+i);if(s>=0){var a=o.indexOf("\n",s+1);o=o.substring(a+1)}this.stack=o}}},util$1.inherits(u.AssertionError,Error),u.fail=p,u.ok=d,u.equal=function(t,e,r){t!=e&&p(t,e,r,"==",u.equal)},u.notEqual=function(t,e,r){t==e&&p(t,e,r,"!=",u.notEqual)},u.deepEqual=function(t,e,r){y(t,e,!1)||p(t,e,r,"deepEqual",u.deepEqual)},u.deepStrictEqual=function(t,e,r){y(t,e,!0)||p(t,e,r,"deepStrictEqual",u.deepStrictEqual)},u.notDeepEqual=function(t,e,r){y(t,e,!1)&&p(t,e,r,"notDeepEqual",u.notDeepEqual)},u.notDeepStrictEqual=function t(e,r,n){y(e,r,!0)&&p(e,r,n,"notDeepStrictEqual",t)},u.strictEqual=function(t,e,r){t!==e&&p(t,e,r,"===",u.strictEqual)},u.notStrictEqual=function(t,e,r){t===e&&p(t,e,r,"!==",u.notStrictEqual)},u.throws=function(t,e,r){v(!0,t,e,r)},u.doesNotThrow=function(t,e,r){v(!1,t,e,r)},u.ifError=function(t){if(t)throw t},u.strict=objectAssign(function t(e,r){e||p(e,!0,r,"==",t)},u,{equal:u.strictEqual,deepEqual:u.deepStrictEqual,notEqual:u.notStrictEqual,notDeepEqual:u.notDeepStrictEqual}),u.strict.strict=u.strict;var b=Object.keys||function(t){var e=[];for(var r in t)n.call(t,r)&&e.push(r);return e}}),s=1e3,m=60*s,h=60*m,d=24*h,w=7*d,y=365.25*d,ms=function(t,e){e=e||{};var r=typeof t;if("string"===r&&t.length>0)return parse$1(t);if("number"===r&&!1===isNaN(t))return e.long?fmtLong(t):fmtShort(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function parse$1(t){if(!((t=String(t)).length>100)){var e=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y;case"weeks":case"week":case"w":return r*w;case"days":case"day":case"d":return r*d;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h;case"minutes":case"minute":case"mins":case"min":case"m":return r*m;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort(t){var e=Math.abs(t);return e>=d?Math.round(t/d)+"d":e>=h?Math.round(t/h)+"h":e>=m?Math.round(t/m)+"m":e>=s?Math.round(t/s)+"s":t+"ms"}function fmtLong(t){var e=Math.abs(t);return e>=d?plural(t,e,d,"day"):e>=h?plural(t,e,h,"hour"):e>=m?plural(t,e,m,"minute"):e>=s?plural(t,e,s,"second"):t+" ms"}function plural(t,e,r,n){var o=e>=1.5*r;return Math.round(t/r)+" "+n+(o?"s":"")}function setup(t){function e(t){for(var e=0,n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return r.colors[Math.abs(e)%r.colors.length]}function r(t){var i;function s(){if(s.enabled){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var o=s,a=Number(new Date),u=a-(i||a);o.diff=u,o.prev=i,o.curr=a,i=a,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");var c=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;c++;var i=r.formatters[n];if("function"==typeof i){var s=e[c];t=i.call(o,s),e.splice(c,1),c--}return t}),r.formatArgs.call(o,e),(o.log||r.log).apply(o,e)}}return s.namespace=t,s.enabled=r.enabled(t),s.useColors=r.useColors(),s.color=e(t),s.destroy=n,s.extend=o,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){var t=r.instances.indexOf(this);return-1!==t&&(r.instances.splice(t,1),!0)}function o(t,e){return r(this.namespace+(void 0===e?":":e)+t)}return r.debug=r,r.default=r,r.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},r.disable=function(){r.enable("")},r.enable=function(t){var e;r.save(t),r.names=[],r.skips=[];var n=("string"==typeof t?t:"").split(/[\s,]+/),o=n.length;for(e=0;e<o;e++)n[e]&&("-"===(t=n[e].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+t.substr(1)+"$")):r.names.push(new RegExp("^"+t+"$")));for(e=0;e<r.instances.length;e++){var i=r.instances[e];i.enabled=r.enabled(i.namespace)}},r.enabled=function(t){if("*"===t[t.length-1])return!0;var e,n;for(e=0,n=r.skips.length;e<n;e++)if(r.skips[e].test(t))return!1;for(e=0,n=r.names.length;e<n;e++)if(r.names[e].test(t))return!0;return!1},r.humanize=ms,Object.keys(t).forEach(function(e){r[e]=t[e]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=e,r.enable(r.load()),r}var common=setup,browser=createCommonjsModule(function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.log=function(){var t;return"object"===("undefined"==typeof console?"undefined":r(console))&&console.log&&(t=console).log.apply(t,arguments)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var n=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&"%c"===t&&(o=++n)}),e.splice(o,0,r)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){var t;try{t=e.storage.getItem("debug")}catch(t){}!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=common(e),t.exports.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}),browser_1=browser.log,browser_2=browser.formatArgs,browser_3=browser.save,browser_4=browser.load,browser_5=browser.useColors,browser_6=browser.storage,browser_7=browser.colors,isBuffer$2=function(t){return t instanceof Buffer},inherits_browser=createCommonjsModule(function(t){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}),inherits$1=createCommonjsModule(function(t){try{var e=util$2;if("function"!=typeof e.inherits)throw"";t.exports=e.inherits}catch(e){t.exports=inherits_browser}}),util$2=createCommonjsModule(function(t,e){var r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},n=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(s(arguments[r]));return e.join(" ")}r=1;for(var o=arguments,i=o.length,a=String(t).replace(n,function(t){if("%%"===t)return"%";if(r>=i)return t;switch(t){case"%s":return String(o[r++]);case"%d":return Number(o[r++]);case"%j":try{return JSON.stringify(o[r++])}catch(t){return"[Circular]"}default:return t}}),u=o[r];r<i;u=o[++r])d(u)||!b(u)?a+=" "+u:a+=" "+s(u);return a},e.deprecate=function(t,r){if("undefined"!=typeof process&&!0===process.noDeprecation)return t;if("undefined"==typeof process)return function(){return e.deprecate(t,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),n=!0}return t.apply(this,arguments)}};var o,i={};function s(t,r){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),p(r)?n.showHidden=r:r&&e._extend(n,r),g(n.showHidden)&&(n.showHidden=!1),g(n.depth)&&(n.depth=2),g(n.colors)&&(n.colors=!1),g(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=a),c(n,t,n.depth)}function a(t,e){var r=s.styles[e];return r?"["+s.colors[r][0]+"m"+t+"["+s.colors[r][1]+"m":t}function u(t,e){return t}function c(t,r,n){if(t.customInspect&&r&&O(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,t);return m(o)||(o=c(t,o,n)),o}var i=function(t,e){if(g(e))return t.stylize("undefined","undefined");if(m(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(y(e))return t.stylize(""+e,"number");if(p(e))return t.stylize(""+e,"boolean");if(d(e))return t.stylize("null","null")}(t,r);if(i)return i;var s=Object.keys(r),a=function(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),w(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(r);if(0===s.length){if(O(r)){var u=r.name?": "+r.name:"";return t.stylize("[Function"+u+"]","special")}if(v(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(_(r))return t.stylize(Date.prototype.toString.call(r),"date");if(w(r))return l(r)}var b,j="",x=!1,$=["{","}"];(h(r)&&(x=!0,$=["[","]"]),O(r))&&(j=" [Function"+(r.name?": "+r.name:"")+"]");return v(r)&&(j=" "+RegExp.prototype.toString.call(r)),_(r)&&(j=" "+Date.prototype.toUTCString.call(r)),w(r)&&(j=" "+l(r)),0!==s.length||x&&0!=r.length?n<0?v(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),b=x?function(t,e,r,n,o){for(var i=[],s=0,a=e.length;s<a;++s)C(e,String(s))?i.push(f(t,e,r,n,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(f(t,e,r,n,o,!0))}),i}(t,r,n,a,s):s.map(function(e){return f(t,r,n,a,e,x)}),t.seen.pop(),function(t,e,r){if(t.reduce(function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(b,j,$)):$[0]+j+$[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,n,o,i){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),C(n,o)||(s="["+o+"]"),a||(t.seen.indexOf(u.value)<0?(a=d(r)?c(t,u.value,null):c(t,u.value,r-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),g(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function h(t){return Array.isArray(t)}function p(t){return"boolean"==typeof t}function d(t){return null===t}function y(t){return"number"==typeof t}function m(t){return"string"==typeof t}function g(t){return void 0===t}function v(t){return b(t)&&"[object RegExp]"===j(t)}function b(t){return"object"==typeof t&&null!==t}function _(t){return b(t)&&"[object Date]"===j(t)}function w(t){return b(t)&&("[object Error]"===j(t)||t instanceof Error)}function O(t){return"function"==typeof t}function j(t){return Object.prototype.toString.call(t)}function x(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(g(o)&&(o=process.env.NODE_DEBUG||""),t=t.toUpperCase(),!i[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var r=process.pid;i[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else i[t]=function(){};return i[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=h,e.isBoolean=p,e.isNull=d,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=m,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=g,e.isRegExp=v,e.isObject=b,e.isDate=_,e.isError=w,e.isFunction=O,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=isBuffer$2;var $=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,r;console.log("%s - %s",(t=new Date,r=[x(t.getHours()),x(t.getMinutes()),x(t.getSeconds())].join(":"),[t.getDate(),$[t.getMonth()],r].join(" ")),e.format.apply(e,arguments))},e.inherits=inherits$1,e._extend=function(t,e){if(!e||!b(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};var E="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function R(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(E&&t[E]){var e;if("function"!=typeof(e=t[E]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,E,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,n=new Promise(function(t,n){e=t,r=n}),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push(function(t,n){t?r(t):e(n)});try{t.apply(this,o)}catch(t){r(t)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),E&&Object.defineProperty(e,E,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=E,e.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);var n=e.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var o=this,i=function(){return n.apply(o,arguments)};t.apply(this,e).then(function(t){process.nextTick(i,null,t)},function(t){process.nextTick(R,t,i)})}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,r(t)),e}}),util_1$2=util$2.format,util_2$2=util$2.deprecate,util_3$2=util$2.debuglog,util_4$2=util$2.inspect,util_5$1=util$2.isArray,util_6$1=util$2.isBoolean,util_7$1=util$2.isNull,util_8$1=util$2.isNullOrUndefined,util_9$1=util$2.isNumber,util_10$1=util$2.isString,util_11$1=util$2.isSymbol,util_12$1=util$2.isUndefined,util_13$1=util$2.isRegExp,util_14$1=util$2.isObject,util_15$1=util$2.isDate,util_16$1=util$2.isError,util_17$1=util$2.isFunction,util_18$1=util$2.isPrimitive,util_19$1=util$2.isBuffer,util_20$1=util$2.log,util_21$1=util$2.inherits,util_22$1=util$2._extend,util_23=util$2.promisify,util_24=util$2.callbackify,hasFlag=(t,e)=>{e=e||process.argv;const r=t.startsWith("-")?"":1===t.length?"-":"--",n=e.indexOf(r+t),o=e.indexOf("--");return-1!==n&&(-1===o||n<o)};const env=process.env;let forceColor;function translateLevel(t){return 0!==t&&{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function supportsColor(t){if(!1===forceColor)return 0;if(hasFlag("color=16m")||hasFlag("color=full")||hasFlag("color=truecolor"))return 3;if(hasFlag("color=256"))return 2;if(t&&!t.isTTY&&!0!==forceColor)return 0;const e=forceColor?1:0;if("win32"===process.platform){const t=os.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in env)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(t=>t in env)||"codeship"===env.CI_NAME?1:e;if("TEAMCITY_VERSION"in env)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(env.TEAMCITY_VERSION)?1:0;if("truecolor"===env.COLORTERM)return 3;if("TERM_PROGRAM"in env){const t=parseInt((env.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(env.TERM_PROGRAM){case"iTerm.app":return t>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(env.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)?1:"COLORTERM"in env?1:(env.TERM,e)}function getSupportLevel(t){return translateLevel(supportsColor(t))}hasFlag("no-color")||hasFlag("no-colors")||hasFlag("color=false")?forceColor=!1:(hasFlag("color")||hasFlag("colors")||hasFlag("color=true")||hasFlag("color=always"))&&(forceColor=!0),"FORCE_COLOR"in env&&(forceColor=0===env.FORCE_COLOR.length||0!==parseInt(env.FORCE_COLOR,10));var supportsColor_1={supportsColor:getSupportLevel,stdout:getSupportLevel(process.stdout),stderr:getSupportLevel(process.stderr)},node=createCommonjsModule(function(t,e){e.init=function(t){t.inspectOpts={};for(var r=Object.keys(e.inspectOpts),n=0;n<r.length;n++)t.inspectOpts[r[n]]=e.inspectOpts[r[n]]},e.log=function(){return process.stderr.write(util$2.format.apply(util$2,arguments)+"\n")},e.formatArgs=function(r){var n=this.namespace;if(this.useColors){var o=this.color,i="[3"+(o<8?o:"8;5;"+o),s="  ".concat(i,";1m").concat(n," [0m");r[0]=s+r[0].split("\n").join("\n"+s),r.push(i+"m+"+t.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(e.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},e.save=function(t){t?process.env.DEBUG=t:delete process.env.DEBUG},e.load=function(){return process.env.DEBUG},e.useColors=function(){return"colors"in e.inspectOpts?Boolean(e.inspectOpts.colors):tty.isatty(process.stderr.fd)},e.colors=[6,2,3,4,5,1];try{var r=supportsColor_1;r&&(r.stderr||r).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}e.inspectOpts=Object.keys(process.env).filter(function(t){return/^debug_/i.test(t)}).reduce(function(t,e){var r=e.substring(6).toLowerCase().replace(/_([a-z])/g,function(t,e){return e.toUpperCase()}),n=process.env[e];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),t[r]=n,t},{}),t.exports=common(e);var n=t.exports.formatters;n.o=function(t){return this.inspectOpts.colors=this.useColors,util$2.inspect(t,this.inspectOpts).replace(/\s*\n\s*/g," ")},n.O=function(t){return this.inspectOpts.colors=this.useColors,util$2.inspect(t,this.inspectOpts)}}),node_1=node.init,node_2=node.log,node_3=node.formatArgs,node_4=node.save,node_5=node.load,node_6=node.useColors,node_7=node.colors,node_8=node.inspectOpts,src=createCommonjsModule(function(t){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?t.exports=browser:t.exports=node}),URL=url.URL,Writable=stream.Writable,debug=src("follow-redirects"),SAFE_METHODS={GET:!0,HEAD:!0,OPTIONS:!0,TRACE:!0},eventHandlers=Object.create(null);function RedirectableRequest(t,e){Writable.call(this),t.headers=t.headers||{},this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t.host&&(t.hostname||(t.hostname=t.host),delete t.host),e&&this.on("response",e);var r=this;if(this._onNativeResponse=function(t){r._processResponse(t)},!t.pathname&&t.path){var n=t.path.indexOf("?");n<0?t.pathname=t.path:(t.pathname=t.path.substring(0,n),t.search=t.path.substring(n))}this._performRequest()}function startTimer(t,e){clearTimeout(t._timeout),t._timeout=setTimeout(function(){t.emit("timeout")},e)}function clearTimer(){clearTimeout(this._timeout)}function wrap(t){var e={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(t).forEach(function(n){var o=n+":",i=r[o]=t[n],s=e[n]=Object.create(i);s.request=function(t,n,i){if("string"==typeof t){var s=t;try{t=urlToOptions(new URL(s))}catch(e){t=url.parse(s)}}else URL&&t instanceof URL?t=urlToOptions(t):(i=n,n=t,t={protocol:o});return"function"==typeof n&&(i=n,n=null),(n=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},t,n)).nativeProtocols=r,assert_1.equal(n.protocol,o,"protocol mismatch"),debug("options",n),new RedirectableRequest(n,i)},s.get=function(t,e,r){var n=s.request(t,e,r);return n.end(),n}}),e}function noop(){}function urlToOptions(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return""!==t.port&&(e.port=Number(t.port)),e}["abort","aborted","error","socket","timeout"].forEach(function(t){eventHandlers[t]=function(e){this._redirectable.emit(t,e)}}),RedirectableRequest.prototype=Object.create(Writable.prototype),RedirectableRequest.prototype.write=function(t,e,r){if(this._ending)throw new Error("write after end");if(!("string"==typeof t||"object"==typeof t&&"length"in t))throw new Error("data should be a string, Buffer or Uint8Array");"function"==typeof e&&(r=e,e=null),0!==t.length?this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new Error("Request body larger than maxBodyLength limit")),this.abort()):r&&r()},RedirectableRequest.prototype.end=function(t,e,r){if("function"==typeof t?(r=t,t=e=null):"function"==typeof e&&(r=e,e=null),t){var n=this,o=this._currentRequest;this.write(t,e,function(){n._ended=!0,o.end(null,null,r)}),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,r)},RedirectableRequest.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)},RedirectableRequest.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)},RedirectableRequest.prototype.setTimeout=function(t,e){if(e&&this.once("timeout",e),this.socket)startTimer(this,t);else{var r=this;this._currentRequest.once("socket",function(){startTimer(r,t)})}return this.once("response",clearTimer),this.once("error",clearTimer),this},["abort","flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){RedirectableRequest.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}}),["aborted","connection","socket"].forEach(function(t){Object.defineProperty(RedirectableRequest.prototype,t,{get:function(){return this._currentRequest[t]}})}),RedirectableRequest.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(e){if(this._options.agents){var r=t.substr(0,t.length-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);for(var o in this._currentUrl=url.format(this._options),n._redirectable=this,eventHandlers)o&&n.on(o,eventHandlers[o]);if(this._isRedirect){var i=0,s=this,a=this._requestBodyBuffers;!function t(e){if(n===s._currentRequest)if(e)s.emit("error",e);else if(i<a.length){var r=a[i++];n.finished||n.write(r.data,r.encoding,t)}else s._ended&&n.end()}()}}else this.emit("error",new Error("Unsupported protocol "+t))},RedirectableRequest.prototype._processResponse=function(t){this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:t.statusCode});var e=t.headers.location;if(e&&!1!==this._options.followRedirects&&t.statusCode>=300&&t.statusCode<400){if(this._currentRequest.removeAllListeners(),this._currentRequest.on("error",noop),this._currentRequest.abort(),++this._redirectCount>this._options.maxRedirects)return void this.emit("error",new Error("Max redirects exceeded."));var r,n=this._options.headers;if(307!==t.statusCode&&!(this._options.method in SAFE_METHODS))for(r in this._options.method="GET",this._requestBodyBuffers=[],n)/^content-/i.test(r)&&delete n[r];if(!this._isRedirect)for(r in n)/^host$/i.test(r)&&delete n[r];var o=url.resolve(this._currentUrl,e);debug("redirecting to",o),Object.assign(this._options,url.parse(o)),this._isRedirect=!0,this._performRequest(),t.destroy()}else t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[]};var followRedirects=wrap({http:http,https:https}),wrap_1=wrap;followRedirects.wrap=wrap_1;var name="axios",version="0.18.0",description="Promise based HTTP client for the browser and node.js",main="index.js",scripts={test:"grunt test && bundlesize",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js"},repository={type:"git",url:"https://github.com/axios/axios.git"},keywords=["xhr","http","ajax","promise","node"],author="Matt Zabriskie",license="MIT",bugs={url:"https://github.com/axios/axios/issues"},homepage="https://github.com/axios/axios",devDependencies={bundlesize:"^0.5.7",coveralls:"^2.11.9","es6-promise":"^4.0.5",grunt:"^1.0.1","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.0.0","grunt-contrib-nodeunit":"^1.0.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^19.0.0","grunt-karma":"^2.0.0","grunt-ts":"^6.0.0-beta.3","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^1.3.0","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.0.0","karma-firefox-launcher":"^1.0.0","karma-jasmine":"^1.0.2","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.1.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",sinon:"^1.17.4",webpack:"^1.13.1","webpack-dev-server":"^1.14.1","url-search-params":"^0.6.1",typescript:"^2.0.3"},browser$1={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},typings="./index.d.ts",dependencies={"follow-redirects":"^1.3.0","is-buffer":"^1.1.5"},bundlesize=[{path:"./dist/axios.min.js",threshold:"5kB"}],_package={name:name,version:version,description:description,main:main,scripts:scripts,repository:repository,keywords:keywords,author:author,license:license,bugs:bugs,homepage:homepage,devDependencies:devDependencies,browser:browser$1,typings:typings,dependencies:dependencies,bundlesize:bundlesize},_package$1=Object.freeze({name:name,version:version,description:description,main:main,scripts:scripts,repository:repository,keywords:keywords,author:author,license:license,bugs:bugs,homepage:homepage,devDependencies:devDependencies,browser:browser$1,typings:typings,dependencies:dependencies,bundlesize:bundlesize,default:_package}),pkg=getCjsExportFromNamespace(_package$1),httpFollow=followRedirects.http,httpsFollow=followRedirects.https,http_1=function(t){return new Promise(function(e,r){var n,o=t.data,i=t.headers;if(i["User-Agent"]||i["user-agent"]||(i["User-Agent"]="axios/"+pkg.version),o&&!utils.isStream(o)){if(Buffer.isBuffer(o));else if(utils.isArrayBuffer(o))o=new Buffer(new Uint8Array(o));else{if(!utils.isString(o))return r(createError("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",t));o=new Buffer(o,"utf-8")}i["Content-Length"]=o.length}var s=void 0;t.auth&&(s=(t.auth.username||"")+":"+(t.auth.password||""));var a=url.parse(t.url),u=a.protocol||"http:";if(!s&&a.auth){var c=a.auth.split(":");s=(c[0]||"")+":"+(c[1]||"")}s&&delete i.Authorization;var l="https:"===u,f=l?t.httpsAgent:t.httpAgent,h={path:buildURL(a.path,t.params,t.paramsSerializer).replace(/^\?/,""),method:t.method,headers:i,agent:f,auth:s};t.socketPath?h.socketPath=t.socketPath:(h.hostname=a.hostname,h.port=a.port);var p,d=t.proxy;if(!d&&!1!==d){var y=u.slice(0,-1)+"_proxy",m=process.env[y]||process.env[y.toUpperCase()];if(m){var g=url.parse(m);if(d={host:g.hostname,port:g.port},g.auth){var v=g.auth.split(":");d.auth={username:v[0],password:v[1]}}}}if(d&&(h.hostname=d.host,h.host=d.host,h.headers.host=a.hostname+(a.port?":"+a.port:""),h.port=d.port,h.path=u+"//"+a.hostname+(a.port?":"+a.port:"")+h.path,d.auth)){var b=new Buffer(d.auth.username+":"+d.auth.password,"utf8").toString("base64");h.headers["Proxy-Authorization"]="Basic "+b}t.transport?p=t.transport:0===t.maxRedirects?p=l?https:http:(t.maxRedirects&&(h.maxRedirects=t.maxRedirects),p=l?httpsFollow:httpFollow),t.maxContentLength&&t.maxContentLength>-1&&(h.maxBodyLength=t.maxContentLength);var _=p.request(h,function(o){if(!_.aborted){clearTimeout(n),n=null;var i=o;switch(o.headers["content-encoding"]){case"gzip":case"compress":case"deflate":i=i.pipe(zlib.createUnzip()),delete o.headers["content-encoding"]}var s=o.req||_,a={status:o.statusCode,statusText:o.statusMessage,headers:o.headers,config:t,request:s};if("stream"===t.responseType)a.data=i,settle(e,r,a);else{var u=[];i.on("data",function(e){u.push(e),t.maxContentLength>-1&&Buffer.concat(u).length>t.maxContentLength&&r(createError("maxContentLength size of "+t.maxContentLength+" exceeded",t,null,s))}),i.on("error",function(e){_.aborted||r(enhanceError(e,t,null,s))}),i.on("end",function(){var n=Buffer.concat(u);"arraybuffer"!==t.responseType&&(n=n.toString("utf8")),a.data=n,settle(e,r,a)})}}});_.on("error",function(e){_.aborted||r(enhanceError(e,t,null,_))}),t.timeout&&!n&&(n=setTimeout(function(){_.abort(),r(createError("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",_))},t.timeout)),t.cancelToken&&t.cancelToken.promise.then(function(t){_.aborted||(_.abort(),r(t))}),utils.isStream(o)?o.pipe(_):_.end(o)})},DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(t,e){!utils.isUndefined(t)&&utils.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function getDefaultAdapter(){var t;return"undefined"!=typeof XMLHttpRequest?t=xhr:"undefined"!=typeof process&&(t=http_1),t}var defaults={adapter:getDefaultAdapter(),transformRequest:[function(t,e){return normalizeHeaderName(e,"Content-Type"),utils.isFormData(t)||utils.isArrayBuffer(t)||utils.isBuffer(t)||utils.isStream(t)||utils.isFile(t)||utils.isBlob(t)?t:utils.isArrayBufferView(t)?t.buffer:utils.isURLSearchParams(t)?(setContentTypeIfUnset(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):utils.isObject(t)?(setContentTypeIfUnset(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function(t){defaults.headers[t]={}}),utils.forEach(["post","put","patch"],function(t){defaults.headers[t]=utils.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults;function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},InterceptorManager.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},InterceptorManager.prototype.forEach=function(t){utils.forEach(this.handlers,function(e){null!==e&&t(e)})};var InterceptorManager_1=InterceptorManager,transformData=function(t,e,r){return utils.forEach(r,function(r){t=r(t,e)}),t},isCancel=function(t){return!(!t||!t.__CANCEL__)},isAbsoluteURL=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)},combineURLs=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t};function throwIfCancellationRequested(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var dispatchRequest=function(t){return throwIfCancellationRequested(t),t.baseURL&&!isAbsoluteURL(t.url)&&(t.url=combineURLs(t.baseURL,t.url)),t.headers=t.headers||{},t.data=transformData(t.data,t.headers,t.transformRequest),t.headers=utils.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),utils.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||defaults_1.adapter)(t).then(function(e){return throwIfCancellationRequested(t),e.data=transformData(e.data,e.headers,t.transformResponse),e},function(e){return isCancel(e)||(throwIfCancellationRequested(t),e&&e.response&&(e.response.data=transformData(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})},clone_1=createCommonjsModule(function(t){var e=function(){function t(e,n,o,i){"object"==typeof n&&(o=n.depth,i=n.prototype,n.filter,n=n.circular);var s=[],a=[],u="undefined"!=typeof Buffer;return void 0===n&&(n=!0),void 0===o&&(o=1/0),function e(o,c){if(null===o)return null;if(0==c)return o;var l,f;if("object"!=typeof o)return o;if(t.__isArray(o))l=[];else if(t.__isRegExp(o))l=new RegExp(o.source,r(o)),o.lastIndex&&(l.lastIndex=o.lastIndex);else if(t.__isDate(o))l=new Date(o.getTime());else{if(u&&Buffer.isBuffer(o))return l=Buffer.allocUnsafe?Buffer.allocUnsafe(o.length):new Buffer(o.length),o.copy(l),l;void 0===i?(f=Object.getPrototypeOf(o),l=Object.create(f)):(l=Object.create(i),f=i)}if(n){var h=s.indexOf(o);if(-1!=h)return a[h];s.push(o),a.push(l)}for(var p in o){var d;f&&(d=Object.getOwnPropertyDescriptor(f,p)),d&&null==d.set||(l[p]=e(o[p],c-1))}return l}(e,o)}function e(t){return Object.prototype.toString.call(t)}function r(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return t.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},t.__objToStr=e,t.__isDate=function(t){return"object"==typeof t&&"[object Date]"===e(t)},t.__isArray=function(t){return"object"==typeof t&&"[object Array]"===e(t)},t.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===e(t)},t.__getRegExpFlags=r,t}();t.exports&&(t.exports=e)}),defaults$1=function(t,e){return t=t||{},Object.keys(e).forEach(function(r){void 0===t[r]&&(t[r]=clone_1(e[r]))}),t};function Axios(t){this.defaults=t,this.interceptors={request:new InterceptorManager_1,response:new InterceptorManager_1}}Axios.prototype.request=function(t){"string"==typeof t&&(t=utils.merge({url:arguments[0]},arguments[1])),(t=utils.merge(defaults$1,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[dispatchRequest,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)r=r.then(e.shift(),e.shift());return r},utils.forEach(["delete","get","head","options"],function(t){Axios.prototype[t]=function(e,r){return this.request(utils.merge(r||{},{method:t,url:e}))}}),utils.forEach(["post","put","patch"],function(t){Axios.prototype[t]=function(e,r,n){return this.request(utils.merge(n||{},{method:t,url:e,data:r}))}});var Axios_1=Axios;function Cancel(t){this.message=t}Cancel.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0;var Cancel_1=Cancel;function CancelToken(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var r=this;t(function(t){r.reason||(r.reason=new Cancel_1(t),e(r.reason))})}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.source=function(){var t;return{token:new CancelToken(function(e){t=e}),cancel:t}};var CancelToken_1=CancelToken,spread=function(t){return function(e){return t.apply(null,e)}};function createInstance(t){var e=new Axios_1(t),r=bind(Axios_1.prototype.request,e);return utils.extend(r,Axios_1.prototype,e),utils.extend(r,e),r}var axios=createInstance(defaults_1);axios.Axios=Axios_1,axios.create=function(t){return createInstance(utils.merge(defaults_1,t))},axios.Cancel=Cancel_1,axios.CancelToken=CancelToken_1,axios.isCancel=isCancel,axios.all=function(t){return Promise.all(t)},axios.spread=spread;var axios_1=axios,default_1=axios;axios_1.default=default_1;var axios$1=axios_1,lodash_isequal=createCommonjsModule(function(t,e){var r=200,n="__lodash_hash_undefined__",o=1,i=2,s=9007199254740991,a="[object Arguments]",u="[object Array]",c="[object AsyncFunction]",l="[object Boolean]",f="[object Date]",h="[object Error]",p="[object Function]",d="[object GeneratorFunction]",y="[object Map]",m="[object Number]",g="[object Null]",v="[object Object]",b="[object Proxy]",_="[object RegExp]",w="[object Set]",O="[object String]",j="[object Symbol]",x="[object Undefined]",$="[object ArrayBuffer]",C="[object DataView]",E=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S[a]=S[u]=S[$]=S[l]=S[C]=S[f]=S[h]=S[p]=S[y]=S[m]=S[v]=S[_]=S[w]=S[O]=S["[object WeakMap]"]=!1;var A="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,k="object"==typeof self&&self&&self.Object===Object&&self,F=A||k||Function("return this")(),M=e&&!e.nodeType&&e,P=M&&t&&!t.nodeType&&t,T=P&&P.exports===M,I=T&&A.process,B=function(){try{return I&&I.binding&&I.binding("util")}catch(t){}}(),U=B&&B.isTypedArray;function z(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function q(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function N(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var L,D,K,H=Array.prototype,G=Function.prototype,V=Object.prototype,W=F["__core-js_shared__"],J=G.toString,Q=V.hasOwnProperty,X=(L=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||""))?"Symbol(src)_1."+L:"",Y=V.toString,Z=RegExp("^"+J.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=T?F.Buffer:void 0,et=F.Symbol,rt=F.Uint8Array,nt=V.propertyIsEnumerable,ot=H.splice,it=et?et.toStringTag:void 0,st=Object.getOwnPropertySymbols,at=tt?tt.isBuffer:void 0,ut=(D=Object.keys,K=Object,function(t){return D(K(t))}),ct=Bt(F,"DataView"),lt=Bt(F,"Map"),ft=Bt(F,"Promise"),ht=Bt(F,"Set"),pt=Bt(F,"WeakMap"),dt=Bt(Object,"create"),yt=Nt(ct),mt=Nt(lt),gt=Nt(ft),vt=Nt(ht),bt=Nt(pt),_t=et?et.prototype:void 0,wt=_t?_t.valueOf:void 0;function Ot(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function jt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function xt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function $t(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new xt;++e<r;)this.add(t[e])}function Ct(t){var e=this.__data__=new jt(t);this.size=e.size}function Et(t,e){var r=Kt(t),n=!r&&Dt(t),o=!r&&!n&&Ht(t),i=!r&&!n&&!o&&Qt(t),s=r||n||o||i,a=s?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],u=a.length;for(var c in t)!e&&!Q.call(t,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||qt(c,u))||a.push(c);return a}function Rt(t,e){for(var r=t.length;r--;)if(Lt(t[r][0],e))return r;return-1}function St(t){return null==t?void 0===t?x:g:it&&it in Object(t)?function(t){var e=Q.call(t,it),r=t[it];try{t[it]=void 0}catch(t){}var n=Y.call(t);e?t[it]=r:delete t[it];return n}(t):function(t){return Y.call(t)}(t)}function At(t){return Jt(t)&&St(t)==a}function kt(t,e,r,n,s){return t===e||(null==t||null==e||!Jt(t)&&!Jt(e)?t!=t&&e!=e:function(t,e,r,n,s,c){var p=Kt(t),d=Kt(e),g=p?u:zt(t),b=d?u:zt(e),x=(g=g==a?v:g)==v,E=(b=b==a?v:b)==v,R=g==b;if(R&&Ht(t)){if(!Ht(e))return!1;p=!0,x=!1}if(R&&!x)return c||(c=new Ct),p||Qt(t)?Pt(t,e,r,n,s,c):function(t,e,r,n,s,a,u){switch(r){case C:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case $:return!(t.byteLength!=e.byteLength||!a(new rt(t),new rt(e)));case l:case f:case m:return Lt(+t,+e);case h:return t.name==e.name&&t.message==e.message;case _:case O:return t==e+"";case y:var c=q;case w:var p=n&o;if(c||(c=N),t.size!=e.size&&!p)return!1;var d=u.get(t);if(d)return d==e;n|=i,u.set(t,e);var g=Pt(c(t),c(e),n,s,a,u);return u.delete(t),g;case j:if(wt)return wt.call(t)==wt.call(e)}return!1}(t,e,g,r,n,s,c);if(!(r&o)){var S=x&&Q.call(t,"__wrapped__"),A=E&&Q.call(e,"__wrapped__");if(S||A){var k=S?t.value():t,F=A?e.value():e;return c||(c=new Ct),s(k,F,r,n,c)}}if(!R)return!1;return c||(c=new Ct),function(t,e,r,n,i,s){var a=r&o,u=Tt(t),c=u.length,l=Tt(e).length;if(c!=l&&!a)return!1;for(var f=c;f--;){var h=u[f];if(!(a?h in e:Q.call(e,h)))return!1}var p=s.get(t);if(p&&s.get(e))return p==e;var d=!0;s.set(t,e),s.set(e,t);for(var y=a;++f<c;){h=u[f];var m=t[h],g=e[h];if(n)var v=a?n(g,m,h,e,t,s):n(m,g,h,t,e,s);if(!(void 0===v?m===g||i(m,g,r,n,s):v)){d=!1;break}y||(y="constructor"==h)}if(d&&!y){var b=t.constructor,_=e.constructor;b!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return s.delete(t),s.delete(e),d}(t,e,r,n,s,c)}(t,e,r,n,kt,s))}function Ft(t){return!(!Wt(t)||X&&X in t)&&(Gt(t)?Z:E).test(Nt(t))}function Mt(t){if(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||V,e!==n)return ut(t);var e,r,n,o=[];for(var i in Object(t))Q.call(t,i)&&"constructor"!=i&&o.push(i);return o}function Pt(t,e,r,n,s,a){var u=r&o,c=t.length,l=e.length;if(c!=l&&!(u&&l>c))return!1;var f=a.get(t);if(f&&a.get(e))return f==e;var h=-1,p=!0,d=r&i?new $t:void 0;for(a.set(t,e),a.set(e,t);++h<c;){var y=t[h],m=e[h];if(n)var g=u?n(m,y,h,e,t,a):n(y,m,h,t,e,a);if(void 0!==g){if(g)continue;p=!1;break}if(d){if(!z(e,function(t,e){if(o=e,!d.has(o)&&(y===t||s(y,t,r,n,a)))return d.push(e);var o})){p=!1;break}}else if(y!==m&&!s(y,m,r,n,a)){p=!1;break}}return a.delete(t),a.delete(e),p}function Tt(t){return function(t,e,r){var n=e(t);return Kt(t)?n:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(n,r(t))}(t,Xt,Ut)}function It(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function Bt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Ft(r)?r:void 0}Ot.prototype.clear=function(){this.__data__=dt?dt(null):{},this.size=0},Ot.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Ot.prototype.get=function(t){var e=this.__data__;if(dt){var r=e[t];return r===n?void 0:r}return Q.call(e,t)?e[t]:void 0},Ot.prototype.has=function(t){var e=this.__data__;return dt?void 0!==e[t]:Q.call(e,t)},Ot.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=dt&&void 0===e?n:e,this},jt.prototype.clear=function(){this.__data__=[],this.size=0},jt.prototype.delete=function(t){var e=this.__data__,r=Rt(e,t);return!(r<0||(r==e.length-1?e.pop():ot.call(e,r,1),--this.size,0))},jt.prototype.get=function(t){var e=this.__data__,r=Rt(e,t);return r<0?void 0:e[r][1]},jt.prototype.has=function(t){return Rt(this.__data__,t)>-1},jt.prototype.set=function(t,e){var r=this.__data__,n=Rt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},xt.prototype.clear=function(){this.size=0,this.__data__={hash:new Ot,map:new(lt||jt),string:new Ot}},xt.prototype.delete=function(t){var e=It(this,t).delete(t);return this.size-=e?1:0,e},xt.prototype.get=function(t){return It(this,t).get(t)},xt.prototype.has=function(t){return It(this,t).has(t)},xt.prototype.set=function(t,e){var r=It(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},$t.prototype.add=$t.prototype.push=function(t){return this.__data__.set(t,n),this},$t.prototype.has=function(t){return this.__data__.has(t)},Ct.prototype.clear=function(){this.__data__=new jt,this.size=0},Ct.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Ct.prototype.get=function(t){return this.__data__.get(t)},Ct.prototype.has=function(t){return this.__data__.has(t)},Ct.prototype.set=function(t,e){var n=this.__data__;if(n instanceof jt){var o=n.__data__;if(!lt||o.length<r-1)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new xt(o)}return n.set(t,e),this.size=n.size,this};var Ut=st?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var s=t[r];e(s,r,t)&&(i[o++]=s)}return i}(st(t),function(e){return nt.call(t,e)}))}:function(){return[]},zt=St;function qt(t,e){return!!(e=null==e?s:e)&&("number"==typeof t||R.test(t))&&t>-1&&t%1==0&&t<e}function Nt(t){if(null!=t){try{return J.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Lt(t,e){return t===e||t!=t&&e!=e}(ct&&zt(new ct(new ArrayBuffer(1)))!=C||lt&&zt(new lt)!=y||ft&&"[object Promise]"!=zt(ft.resolve())||ht&&zt(new ht)!=w||pt&&"[object WeakMap]"!=zt(new pt))&&(zt=function(t){var e=St(t),r=e==v?t.constructor:void 0,n=r?Nt(r):"";if(n)switch(n){case yt:return C;case mt:return y;case gt:return"[object Promise]";case vt:return w;case bt:return"[object WeakMap]"}return e});var Dt=At(function(){return arguments}())?At:function(t){return Jt(t)&&Q.call(t,"callee")&&!nt.call(t,"callee")},Kt=Array.isArray;var Ht=at||function(){return!1};function Gt(t){if(!Wt(t))return!1;var e=St(t);return e==p||e==d||e==c||e==b}function Vt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=s}function Wt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Jt(t){return null!=t&&"object"==typeof t}var Qt=U?function(t){return function(e){return t(e)}}(U):function(t){return Jt(t)&&Vt(t.length)&&!!S[St(t)]};function Xt(t){return null!=(e=t)&&Vt(e.length)&&!Gt(e)?Et(t):Mt(t);var e}t.exports=function(t,e){return kt(t,e)}}),lodash_clone=createCommonjsModule(function(t,e){var r=200,n="__lodash_hash_undefined__",o=9007199254740991,i="[object Arguments]",s="[object Boolean]",a="[object Date]",u="[object Function]",c="[object GeneratorFunction]",l="[object Map]",f="[object Number]",h="[object Object]",p="[object RegExp]",d="[object Set]",y="[object String]",m="[object Symbol]",g="[object ArrayBuffer]",v="[object DataView]",b="[object Float32Array]",_="[object Float64Array]",w="[object Int8Array]",O="[object Int16Array]",j="[object Int32Array]",x="[object Uint8Array]",$="[object Uint8ClampedArray]",C="[object Uint16Array]",E="[object Uint32Array]",R=/\w*$/,S=/^\[object .+?Constructor\]$/,A=/^(?:0|[1-9]\d*)$/,k={};k[i]=k["[object Array]"]=k[g]=k[v]=k[s]=k[a]=k[b]=k[_]=k[w]=k[O]=k[j]=k[l]=k[f]=k[h]=k[p]=k[d]=k[y]=k[m]=k[x]=k[$]=k[C]=k[E]=!0,k["[object Error]"]=k[u]=k["[object WeakMap]"]=!1;var F="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,M="object"==typeof self&&self&&self.Object===Object&&self,P=F||M||Function("return this")(),T=e&&!e.nodeType&&e,I=T&&t&&!t.nodeType&&t,B=I&&I.exports===T;function U(t,e){return t.set(e[0],e[1]),t}function z(t,e){return t.add(e),t}function q(t,e,r,n){var o=-1,i=t?t.length:0;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function N(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function L(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function D(t,e){return function(r){return t(e(r))}}function K(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var H,G=Array.prototype,V=Function.prototype,W=Object.prototype,J=P["__core-js_shared__"],Q=(H=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+H:"",X=V.toString,Y=W.hasOwnProperty,Z=W.toString,tt=RegExp("^"+X.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=B?P.Buffer:void 0,rt=P.Symbol,nt=P.Uint8Array,ot=D(Object.getPrototypeOf,Object),it=Object.create,st=W.propertyIsEnumerable,at=G.splice,ut=Object.getOwnPropertySymbols,ct=et?et.isBuffer:void 0,lt=D(Object.keys,Object),ft=It(P,"DataView"),ht=It(P,"Map"),pt=It(P,"Promise"),dt=It(P,"Set"),yt=It(P,"WeakMap"),mt=It(Object,"create"),gt=Nt(ft),vt=Nt(ht),bt=Nt(pt),_t=Nt(dt),wt=Nt(yt),Ot=rt?rt.prototype:void 0,jt=Ot?Ot.valueOf:void 0;function xt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function $t(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ct(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Et(t){this.__data__=new $t(t)}function Rt(t,e){var r=Dt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Kt(t)}(t)&&Y.call(t,"callee")&&(!st.call(t,"callee")||Z.call(t)==i)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,o=!!n;for(var s in t)!e&&!Y.call(t,s)||o&&("length"==s||zt(s,n))||r.push(s);return r}function St(t,e,r){var n=t[e];Y.call(t,e)&&Lt(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function At(t,e){for(var r=t.length;r--;)if(Lt(t[r][0],e))return r;return-1}function kt(t,e,r,n,o,S,A){var F;if(n&&(F=S?n(t,o,S,A):n(t)),void 0!==F)return F;if(!Vt(t))return t;var M=Dt(t);if(M){if(F=function(t){var e=t.length,r=t.constructor(e);e&&"string"==typeof t[0]&&Y.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!e)return function(t,e){var r=-1,n=t.length;e||(e=Array(n));for(;++r<n;)e[r]=t[r];return e}(t,F)}else{var P=Ut(t),T=P==u||P==c;if(Ht(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if(P==h||P==i||T&&!S){if(N(t))return S?t:{};if(F=function(t){return"function"!=typeof t.constructor||qt(t)?{}:(e=ot(t),Vt(e)?it(e):{});var e}(T?{}:t),!e)return function(t,e){return Pt(t,Bt(t),e)}(t,function(t,e){return t&&Pt(e,Wt(e),t)}(F,t))}else{if(!k[P])return S?t:{};F=function(t,e,r,n){var o=t.constructor;switch(e){case g:return Mt(t);case s:case a:return new o(+t);case v:return function(t,e){var r=e?Mt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,n);case b:case _:case w:case O:case j:case x:case $:case C:case E:return function(t,e){var r=e?Mt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,n);case l:return function(t,e,r){return q(e?r(L(t),!0):L(t),U,new t.constructor)}(t,n,r);case f:case y:return new o(t);case p:return(c=new(u=t).constructor(u.source,R.exec(u))).lastIndex=u.lastIndex,c;case d:return function(t,e,r){return q(e?r(K(t),!0):K(t),z,new t.constructor)}(t,n,r);case m:return i=t,jt?Object(jt.call(i)):{}}var i;var u,c}(t,P,kt,e)}}A||(A=new Et);var I=A.get(t);if(I)return I;if(A.set(t,F),!M)var B=r?function(t){return function(t,e,r){var n=e(t);return Dt(t)?n:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(n,r(t))}(t,Wt,Bt)}(t):Wt(t);return function(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r,t););}(B||t,function(o,i){B&&(o=t[i=o]),St(F,i,kt(o,e,r,n,i,t,A))}),F}function Ft(t){return!(!Vt(t)||Q&&Q in t)&&(Gt(t)||N(t)?tt:S).test(Nt(t))}function Mt(t){var e=new t.constructor(t.byteLength);return new nt(e).set(new nt(t)),e}function Pt(t,e,r,n){r||(r={});for(var o=-1,i=e.length;++o<i;){var s=e[o],a=n?n(r[s],t[s],s,r,t):void 0;St(r,s,void 0===a?t[s]:a)}return r}function Tt(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function It(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Ft(r)?r:void 0}xt.prototype.clear=function(){this.__data__=mt?mt(null):{}},xt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},xt.prototype.get=function(t){var e=this.__data__;if(mt){var r=e[t];return r===n?void 0:r}return Y.call(e,t)?e[t]:void 0},xt.prototype.has=function(t){var e=this.__data__;return mt?void 0!==e[t]:Y.call(e,t)},xt.prototype.set=function(t,e){return this.__data__[t]=mt&&void 0===e?n:e,this},$t.prototype.clear=function(){this.__data__=[]},$t.prototype.delete=function(t){var e=this.__data__,r=At(e,t);return!(r<0||(r==e.length-1?e.pop():at.call(e,r,1),0))},$t.prototype.get=function(t){var e=this.__data__,r=At(e,t);return r<0?void 0:e[r][1]},$t.prototype.has=function(t){return At(this.__data__,t)>-1},$t.prototype.set=function(t,e){var r=this.__data__,n=At(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},Ct.prototype.clear=function(){this.__data__={hash:new xt,map:new(ht||$t),string:new xt}},Ct.prototype.delete=function(t){return Tt(this,t).delete(t)},Ct.prototype.get=function(t){return Tt(this,t).get(t)},Ct.prototype.has=function(t){return Tt(this,t).has(t)},Ct.prototype.set=function(t,e){return Tt(this,t).set(t,e),this},Et.prototype.clear=function(){this.__data__=new $t},Et.prototype.delete=function(t){return this.__data__.delete(t)},Et.prototype.get=function(t){return this.__data__.get(t)},Et.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.set=function(t,e){var n=this.__data__;if(n instanceof $t){var o=n.__data__;if(!ht||o.length<r-1)return o.push([t,e]),this;n=this.__data__=new Ct(o)}return n.set(t,e),this};var Bt=ut?D(ut,Object):function(){return[]},Ut=function(t){return Z.call(t)};function zt(t,e){return!!(e=null==e?o:e)&&("number"==typeof t||A.test(t))&&t>-1&&t%1==0&&t<e}function qt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||W)}function Nt(t){if(null!=t){try{return X.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Lt(t,e){return t===e||t!=t&&e!=e}(ft&&Ut(new ft(new ArrayBuffer(1)))!=v||ht&&Ut(new ht)!=l||pt&&"[object Promise]"!=Ut(pt.resolve())||dt&&Ut(new dt)!=d||yt&&"[object WeakMap]"!=Ut(new yt))&&(Ut=function(t){var e=Z.call(t),r=e==h?t.constructor:void 0,n=r?Nt(r):void 0;if(n)switch(n){case gt:return v;case vt:return l;case bt:return"[object Promise]";case _t:return d;case wt:return"[object WeakMap]"}return e});var Dt=Array.isArray;function Kt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}(t.length)&&!Gt(t)}var Ht=ct||function(){return!1};function Gt(t){var e=Vt(t)?Z.call(t):"";return e==u||e==c}function Vt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Wt(t){return Kt(t)?Rt(t):function(t){if(!qt(t))return lt(t);var e=[];for(var r in Object(t))Y.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}t.exports=function(t){return kt(t,!1,!0)}}),pluralize=createCommonjsModule(function(t,e){var r,n;r=commonjsGlobal,n=function(){var t=[],e=[],r={},n={},o={};function i(t){return"string"==typeof t?new RegExp("^"+t+"$","i"):t}function s(t,e){return t===e?e:t===t.toUpperCase()?e.toUpperCase():t[0]===t[0].toUpperCase()?e.charAt(0).toUpperCase()+e.substr(1).toLowerCase():e.toLowerCase()}function a(t,e){return t.replace(e[0],function(r,n){var o,i,a=(o=e[1],i=arguments,o.replace(/\$(\d{1,2})/g,function(t,e){return i[e]||""}));return s(""===r?t[n-1]:r,a)})}function u(t,e,n){if(!t.length||r.hasOwnProperty(t))return e;for(var o=n.length;o--;){var i=n[o];if(i[0].test(e))return a(e,i)}return e}function c(t,e,r){return function(n){var o=n.toLowerCase();return e.hasOwnProperty(o)?s(n,o):t.hasOwnProperty(o)?s(n,t[o]):u(o,n,r)}}function l(t,e,r,n){return function(n){var o=n.toLowerCase();return!!e.hasOwnProperty(o)||!t.hasOwnProperty(o)&&u(o,o,r)===o}}function f(t,e,r){var n=1===e?f.singular(t):f.plural(t);return(r?e+" ":"")+n}return f.plural=c(o,n,t),f.isPlural=l(o,n,t),f.singular=c(n,o,e),f.isSingular=l(n,o,e),f.addPluralRule=function(e,r){t.push([i(e),r])},f.addSingularRule=function(t,r){e.push([i(t),r])},f.addUncountableRule=function(t){"string"!=typeof t?(f.addPluralRule(t,"$0"),f.addSingularRule(t,"$0")):r[t.toLowerCase()]=!0},f.addIrregularRule=function(t,e){e=e.toLowerCase(),t=t.toLowerCase(),o[t]=e,n[e]=t},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["whiskey","whiskies"]].forEach(function(t){return f.addIrregularRule(t[0],t[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|tlas|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[emjzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/(m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(t){return f.addPluralRule(t[0],t[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/(m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|tlas|gas|(?:her|at|gr)o|ris)(?:es)?$/i,"$1"],[/(analy|ba|diagno|parenthe|progno|synop|the|empha|cri)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(t){return f.addSingularRule(t[0],t[1])}),["adulthood","advice","agenda","aid","alcohol","ammo","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","flounder","fun","gallows","garbage","graffiti","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","manga","news","pike","plankton","pliers","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","species","staff","swine","tennis","traffic","transporation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(f.addUncountableRule),f},"function"==typeof commonjsRequire?t.exports=n():r.pluralize=n()}),pluralize$1=pluralize.plural,singularize=pluralize.singular;function downcaseFirstLetter(t){return t.charAt(0).toLowerCase()+t.slice(1)}function isPlainObject(t){return null!==t&&"object"==typeof t}var Model=function(){function t(t){var e=this;this.fields=new Map,this.baseModel=t,this.pluralName=pluralize$1(this.baseModel.entity),this.singularName=singularize(this.baseModel.entity);var r=this.baseModel.fields();Object.keys(r).forEach(function(t){e.fields.set(t,r[t])})}return t.isFieldAttribute=function(t){var e=Context.getInstance();return t instanceof e.components.Increment||t instanceof e.components.Attr||t instanceof e.components.String||t instanceof e.components.Number||t instanceof e.components.Boolean},t.isConnection=function(t){var e=Context.getInstance();return!(t instanceof e.components.BelongsTo||t instanceof e.components.HasOne||t instanceof e.components.MorphTo||t instanceof e.components.MorphOne)},t.augment=function(t){var e=t.baseModel.fields.bind(t.baseModel);t.baseModel.fields=function(){var r=e();return r.$isPersisted=t.baseModel.boolean(!1),r}},t.prototype.getRelations=function(){var e=new Map;return this.fields.forEach(function(r,n){t.isFieldAttribute(r)||e.set(n,r)}),e},t.prototype.isTypeFieldOfPolymorphicRelation=function(t){var e=this,r=Context.getInstance(),n=!1;return r.models.forEach(function(o){return!n&&(o.getRelations().forEach(function(o){return!(o instanceof r.components.MorphMany||o instanceof r.components.MorphedByMany||o instanceof r.components.MorphOne||o instanceof r.components.MorphTo||o instanceof r.components.MorphToMany)||o.type!==t||!o.related||o.related.entity!==e.baseModel.entity||(n=!0,!1)}),!0)}),n},t.prototype.getRecordWithId=function(t){return this.baseModel.query().withAllRecursive().where("id",t).first()},t.prototype.shouldEagerLoadRelation=function(t,e,r){var n=Context.getInstance();return e instanceof n.components.HasOne||e instanceof n.components.BelongsTo||e instanceof n.components.MorphOne||void 0!==(this.baseModel.eagerLoad||[]).find(function(e){return e===r.singularName||e===r.pluralName||e===t})},t}(),Logger=function(){function t(t){this.PREFIX=["%c Vuex-ORM-ReST: ReST Plugin %c","background: #35495e; padding: 1px 0; border-radius: 3px; color: #eee;","background: transparent;"],this.enabled=t,this.log("Logging is enabled.")}return t.prototype.group=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&(console.groupCollapsed?console.groupCollapsed.apply(console,this.PREFIX.concat(t)):console.log.apply(console,this.PREFIX.concat(t)))},t.prototype.groupEnd=function(){this.enabled&&console.groupEnd&&console.groupEnd()},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&console.log.apply(console,this.PREFIX.concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&console.warn.apply(console,this.PREFIX.concat(t))},t}(),Context=function(){function t(t,e){if(this.models=new Map,this.debugMode=!1,this.components=t,this.options=e,this.database=e.database,this.debugMode=Boolean(e.debug),this.logger=new Logger(this.debugMode),!e.database)throw new Error("database param is required to initialize vuex-orm-rest!")}return t.getInstance=function(){return this.instance},t.setup=function(e,r){this.instance=new t(e,r);var n=r.baseURL,o=r.headers;return this.instance.axios=axios$1.create({baseURL:n,headers:o}),this.instance.collectModels(),this.instance.logger.group("Context setup"),this.instance.logger.log("components",this.instance.components),this.instance.logger.log("options",this.instance.options),this.instance.logger.log("database",this.instance.database),this.instance.logger.log("models",this.instance.models),this.instance.logger.groupEnd(),this.instance},t.prototype.getModel=function(t,e){if(void 0===e&&(e=!1),"string"==typeof t){var r=singularize(downcaseFirstLetter(t));if(t=this.models.get(r),!e&&!t)throw new Error("No such model "+r+"!")}return t},t.prototype.collectModels=function(){var t=this;this.database.entities.forEach(function(e){var r=new Model(e.model);t.models.set(r.singularName,r),Model.augment(r)})},t}(),Action=function(){function t(){}return t.$request=function(t,e,r){return void 0===r&&(r={}),this.context.axios({method:t,url:e,data:r})},t.getModelFromState=function(t){return this.context.getModel(t.$name)},t.context=Context.getInstance(),t}();function createCommonjsModule$1(t,e){return t(e={exports:{}},e.exports),e.exports}var _global=createCommonjsModule$1(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),_core=createCommonjsModule$1(function(t){var e=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=e)}),_core_1=_core.version,_isObject=function(t){return"object"==typeof t?null!==t:"function"==typeof t},_anObject=function(t){if(!_isObject(t))throw TypeError(t+" is not an object!");return t},_fails=function(t){try{return!!t()}catch(t){return!0}},_descriptors=!_fails(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),document$1=_global.document,is=_isObject(document$1)&&_isObject(document$1.createElement),_domCreate=function(t){return is?document$1.createElement(t):{}},_ie8DomDefine=!_descriptors&&!_fails(function(){return 7!=Object.defineProperty(_domCreate("div"),"a",{get:function(){return 7}}).a}),_toPrimitive=function(t,e){if(!_isObject(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!_isObject(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!_isObject(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!_isObject(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},dP=Object.defineProperty,f=_descriptors?Object.defineProperty:function(t,e,r){if(_anObject(t),e=_toPrimitive(e,!0),_anObject(r),_ie8DomDefine)try{return dP(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t},_objectDp={f:f},_propertyDesc=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},_hide=_descriptors?function(t,e,r){return _objectDp.f(t,e,_propertyDesc(1,r))}:function(t,e,r){return t[e]=r,t},hasOwnProperty$2={}.hasOwnProperty,_has=function(t,e){return hasOwnProperty$2.call(t,e)},id=0,px=Math.random(),_uid=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++id+px).toString(36))},_shared=createCommonjsModule$1(function(t){var e=_global["__core-js_shared__"]||(_global["__core-js_shared__"]={});(t.exports=function(t,r){return e[t]||(e[t]=void 0!==r?r:{})})("versions",[]).push({version:_core.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),_functionToString=_shared("native-function-to-string",Function.toString),_redefine=createCommonjsModule$1(function(t){var e=_uid("src"),r=(""+_functionToString).split("toString");_core.inspectSource=function(t){return _functionToString.call(t)},(t.exports=function(t,n,o,i){var s="function"==typeof o;s&&(_has(o,"name")||_hide(o,"name",n)),t[n]!==o&&(s&&(_has(o,e)||_hide(o,e,t[n]?""+t[n]:r.join(String(n)))),t===_global?t[n]=o:i?t[n]?t[n]=o:_hide(t,n,o):(delete t[n],_hide(t,n,o)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||_functionToString.call(this)})}),_aFunction=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},_ctx=function(t,e,r){if(_aFunction(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}},PROTOTYPE="prototype",$export=function(t,e,r){var n,o,i,s,a=t&$export.F,u=t&$export.G,c=t&$export.S,l=t&$export.P,f=t&$export.B,h=u?_global:c?_global[e]||(_global[e]={}):(_global[e]||{})[PROTOTYPE],p=u?_core:_core[e]||(_core[e]={}),d=p[PROTOTYPE]||(p[PROTOTYPE]={});for(n in u&&(r=e),r)i=((o=!a&&h&&void 0!==h[n])?h:r)[n],s=f&&o?_ctx(i,_global):l&&"function"==typeof i?_ctx(Function.call,i):i,h&&_redefine(h,n,i,t&$export.U),p[n]!=i&&_hide(p,n,s),l&&d[n]!=i&&(d[n]=i)};_global.core=_core,$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128;var _export=$export,toString$1={}.toString,_cof=function(t){return toString$1.call(t).slice(8,-1)},_iobject=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==_cof(t)?t.split(""):Object(t)},_defined=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},_toIobject=function(t){return _iobject(_defined(t))},ceil=Math.ceil,floor=Math.floor,_toInteger=function(t){return isNaN(t=+t)?0:(t>0?floor:ceil)(t)},min=Math.min,_toLength=function(t){return t>0?min(_toInteger(t),9007199254740991):0},max=Math.max,min$1=Math.min,_toAbsoluteIndex=function(t,e){return(t=_toInteger(t))<0?max(t+e,0):min$1(t,e)},_arrayIncludes=function(t){return function(e,r,n){var o,i=_toIobject(e),s=_toLength(i.length),a=_toAbsoluteIndex(n,s);if(t&&r!=r){for(;s>a;)if((o=i[a++])!=o)return!0}else for(;s>a;a++)if((t||a in i)&&i[a]===r)return t||a||0;return!t&&-1}},_wks=createCommonjsModule$1(function(t){var e=_shared("wks"),r=_global.Symbol,n="function"==typeof r;(t.exports=function(t){return e[t]||(e[t]=n&&r[t]||(n?r:_uid)("Symbol."+t))}).store=e}),UNSCOPABLES=_wks("unscopables"),ArrayProto=Array.prototype;void 0==ArrayProto[UNSCOPABLES]&&_hide(ArrayProto,UNSCOPABLES,{});var _addToUnscopables=function(t){ArrayProto[UNSCOPABLES][t]=!0},$includes=_arrayIncludes(!0);_export(_export.P,"Array",{includes:function(t){return $includes(this,t,arguments.length>1?arguments[1]:void 0)}}),_addToUnscopables("includes");var includes=_core.Array.includes,shared=_shared("keys"),_sharedKey=function(t){return shared[t]||(shared[t]=_uid(t))},arrayIndexOf=_arrayIncludes(!1),IE_PROTO=_sharedKey("IE_PROTO"),_objectKeysInternal=function(t,e){var r,n=_toIobject(t),o=0,i=[];for(r in n)r!=IE_PROTO&&_has(n,r)&&i.push(r);for(;e.length>o;)_has(n,r=e[o++])&&(~arrayIndexOf(i,r)||i.push(r));return i},_enumBugKeys="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),_objectKeys=Object.keys||function(t){return _objectKeysInternal(t,_enumBugKeys)},f$1=Object.getOwnPropertySymbols,_objectGops={f:f$1},f$2={}.propertyIsEnumerable,_objectPie={f:f$2},_toObject=function(t){return Object(_defined(t))},$assign=Object.assign,_objectAssign=!$assign||_fails(function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(t){e[t]=t}),7!=$assign({},t)[r]||Object.keys($assign({},e)).join("")!=n})?function(t,e){for(var r=_toObject(t),n=arguments.length,o=1,i=_objectGops.f,s=_objectPie.f;n>o;)for(var a,u=_iobject(arguments[o++]),c=i?_objectKeys(u).concat(i(u)):_objectKeys(u),l=c.length,f=0;l>f;)s.call(u,a=c[f++])&&(r[a]=u[a]);return r}:$assign;_export(_export.S+_export.F,"Object",{assign:_objectAssign});var assign=_core.Object.assign,isEnum=_objectPie.f,_objectToArray=function(t){return function(e){for(var r,n=_toIobject(e),o=_objectKeys(n),i=o.length,s=0,a=[];i>s;)isEnum.call(n,r=o[s++])&&a.push(t?[r,n[r]]:n[r]);return a}},$entries=_objectToArray(!0);_export(_export.S,"Object",{entries:function(t){return $entries(t)}});var entries=_core.Object.entries,$values=_objectToArray(!1);_export(_export.S,"Object",{values:function(t){return $values(t)}});var values=_core.Object.values,MATCH=_wks("match"),_isRegexp=function(t){var e;return _isObject(t)&&(void 0!==(e=t[MATCH])?!!e:"RegExp"==_cof(t))},_stringContext=function(t,e,r){if(_isRegexp(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(_defined(t))},MATCH$1=_wks("match"),_failsIsRegexp=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[MATCH$1]=!1,!"/./"[t](e)}catch(t){}}return!0},STARTS_WITH="startsWith",$startsWith=""[STARTS_WITH];_export(_export.P+_export.F*_failsIsRegexp(STARTS_WITH),"String",{startsWith:function(t){var e=_stringContext(this,t,STARTS_WITH),r=_toLength(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return $startsWith?$startsWith.call(e,n,r):e.slice(r,r+n.length)===n}});var startsWith=_core.String.startsWith,Container=function(){function t(){}return t.register=function(t){this.database=t},t}(),extendStatics$1=function(t,e){return(extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function __extends$1(t,e){function r(){this.constructor=t}extendStatics$1(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var __assign$1=function(){return(__assign$1=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function __awaiter$1(t,e,r,n){return new(r||(r=Promise))(function(o,i){function s(t){try{u(n.next(t))}catch(t){i(t)}}function a(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(s,a)}u((n=n.apply(t,e||[])).next())})}function __generator$1(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function isEmpty(t){return Array.isArray(t)?0===t.length:0===Object.keys(t).length}function forOwn(t,e){Object.keys(t).forEach(function(r){return e(t[r],r,t)})}function map(t,e){return Object.keys(t).map(function(r){return e(t[r],r,t)})}function mapValues(t,e){var r=Object.assign({},t);return Object.keys(t).reduce(function(r,n){return r[n]=e(t[n],n,t),r},r)}function pickBy(t,e){return Object.keys(t).reduce(function(r,n){var o=t[n];return e(o,n)&&(r[n]=o),r},{})}function orderBy(t,e,r){var n=-1;return baseSortBy(t.map(function(t){return{criteria:e.map(function(e){return t[e]}),index:++n,value:t}}),function(t,e){return compareMultiple(t,e,r)})}function groupBy(t,e){return t.reduce(function(t,r){var n=e(r);return void 0===t[n]&&(t[n]=[]),t[n].push(r),t},{})}function baseSortBy(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}function compareMultiple(t,e,r){for(var n=t.criteria,o=e.criteria,i=n.length,s=r.length,a=-1;++a<i;){var u=compareAscending(n[a],o[a]);if(u)return a>=s?u:u*("desc"===r[a]?-1:1)}return t.index-e.index}function compareAscending(t,e){if(t!==e){if(t>e)return 1;if(t<e)return-1}return 0}var Utils={isEmpty:isEmpty,forOwn:forOwn,groupBy:groupBy,map:map,mapValues:mapValues,orderBy:orderBy,pickBy:pickBy},Attribute=function(){return function(t){this.model=t}}(),Type=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.isNullable=!1,o.value=r,o.mutator=n,o}return __extends$1(e,t),e.prototype.nullable=function(){return this.isNullable=!0,this},e.prototype.mutate=function(t,e){var r=this.mutator||this.model.mutators()[e];return r?r(t):t},e}(Attribute),Attr=function(t){function e(e,r,n){var o=t.call(this,e,r,n)||this;return o.value=r,o}return __extends$1(e,t),e.prototype.make=function(t,e,r){var n=t=void 0!==t?t:this.value;return"function"==typeof t&&(n=t()),this.mutate(n,r)},e}(Type),Increment=function(t){function e(e){return t.call(this,e,null)||this}return __extends$1(e,t),e.prototype.make=function(t,e,r){return"number"==typeof t?t:null},e}(Type),String$1=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return __extends$1(e,t),e.prototype.make=function(t,e,r){return this.mutate(this.fix(t),r)},e.prototype.fix=function(t){return void 0===t?this.value:"string"==typeof t?t:null===t&&this.isNullable?t:t+""},e}(Type),Number$1=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return __extends$1(e,t),e.prototype.make=function(t,e,r){return this.mutate(this.fix(t),r)},e.prototype.fix=function(t){return void 0===t?this.value:"number"==typeof t?t:"string"==typeof t?parseFloat(t):"boolean"==typeof t?t?1:0:null===t&&this.isNullable?t:0},e}(Type),Boolean$1=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return __extends$1(e,t),e.prototype.make=function(t,e,r){return this.mutate(this.fix(t),r)},e.prototype.fix=function(t){if(void 0===t)return this.value;if("boolean"==typeof t)return t;if("string"==typeof t){if(0===t.length)return!1;var e=parseInt(t,0);return!!isNaN(e)||!!e}return"number"==typeof t?!!t:!(null!==t||!this.isNullable)&&t},e}(Type),Relation=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends$1(e,t),e.prototype.getRelation=function(t,e,r){var n=t.newQuery(e);return r.forEach(function(t){t(n)}),n},e.prototype.getKeys=function(t,e){return t.map(function(t){return t[e]})},e.prototype.mapSingleRelations=function(t,e){return t.reduce(function(t,r){return t[r[e]]=r,t},{})},e.prototype.mapManyRelations=function(t,e){return t.reduce(function(t,r){var n=r[e];return t[n]||(t[n]=[]),t[n].push(r),t},{})},e.prototype.isOneRelation=function(t){return!Array.isArray(t)&&null!==t&&"object"==typeof t},e.prototype.isManyRelation=function(t){return!!Array.isArray(t)&&!(t.length<1)},e.prototype.makeManyRelation=function(t,e){var r=this;return this.isManyRelation(t)?t.filter(function(t){return r.isOneRelation(t)}).map(function(t){return new e(t)}):[]},e}(Attribute),HasOne=function(t){function e(e,r,n,o){var i=t.call(this,e)||this;return i.related=i.model.relation(r),i.foreignKey=n,i.localKey=o,i}return __extends$1(e,t),e.prototype.define=function(t){return t.one(this.related)},e.prototype.attach=function(t,e,r){var n=r[this.related.entity];n&&n[t]&&void 0===n[t][this.foreignKey]&&(e[this.localKey]||(e[this.localKey]=e.$id),n[t][this.foreignKey]=e[this.localKey])},e.prototype.make=function(t,e,r){return this.isOneRelation(t)?new this.related(t):null},e.prototype.load=function(t,e,r,n){var o=this.getRelation(t,this.related.entity,n);this.addEagerConstraints(o,e),this.match(e,o.get(),r)},e.prototype.addEagerConstraints=function(t,e){t.whereFk(this.foreignKey,this.getKeys(e,this.localKey))},e.prototype.match=function(t,e,r){var n=this,o=this.buildDictionary(e);t.forEach(function(t){var e=t[n.localKey],i=o[e];t[r]=i||null})},e.prototype.buildDictionary=function(t){var e=this;return t.reduce(function(t,r){return t[r[e.foreignKey]]=r,t},{})},e}(Relation),BelongsTo=function(t){function e(e,r,n,o){var i=t.call(this,e)||this;return i.parent=i.model.relation(r),i.foreignKey=n,i.ownerKey=o,i}return __extends$1(e,t),e.prototype.define=function(t){return t.one(this.parent)},e.prototype.attach=function(t,e,r){void 0===e[this.foreignKey]&&(e[this.foreignKey]=t)},e.prototype.make=function(t,e,r){return this.isOneRelation(t)?new this.parent(t):null},e.prototype.load=function(t,e,r,n){var o=this.getRelation(t,this.parent.entity,n);this.addEagerConstraints(o,e),this.match(e,o.get(),r)},e.prototype.addEagerConstraints=function(t,e){t.whereFk(this.ownerKey,this.getKeys(e,this.foreignKey))},e.prototype.match=function(t,e,r){var n=this,o=this.buildDictionary(e);t.forEach(function(t){var e=t[n.foreignKey],i=null!==e?o[e]:null;t[r]=i||null})},e.prototype.buildDictionary=function(t){var e=this;return t.reduce(function(t,r){return t[r[e.ownerKey]]=r,t},{})},e}(Relation),HasMany=function(t){function e(e,r,n,o){var i=t.call(this,e)||this;return i.related=i.model.relation(r),i.foreignKey=n,i.localKey=o,i}return __extends$1(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,r){var n=this;Array.isArray(t)&&t.forEach(function(t){var o=r[n.related.entity];o&&o[t]&&void 0===o[t][n.foreignKey]&&(o[t][n.foreignKey]=e[n.localKey])})},e.prototype.make=function(t,e,r){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,r,n){var o=this.getRelation(t,this.related.entity,n);this.addEagerConstraints(o,e),this.match(e,o.get(),r)},e.prototype.addEagerConstraints=function(t,e){t.whereFk(this.foreignKey,this.getKeys(e,this.localKey))},e.prototype.match=function(t,e,r){var n=this,o=this.buildDictionary(e);t.forEach(function(t){var e=t[n.localKey],i=o[e];t[r]=i||[]})},e.prototype.buildDictionary=function(t){var e=this;return t.reduce(function(t,r){var n=r[e.foreignKey];return t[n]||(t[n]=[]),t[n].push(r),t},{})},e}(Relation),HasManyBy=function(t){function e(e,r,n,o){var i=t.call(this,e)||this;return i.parent=i.model.relation(r),i.foreignKey=n,i.ownerKey=o,i}return __extends$1(e,t),e.prototype.define=function(t){return t.many(this.parent)},e.prototype.attach=function(t,e,r){0!==t.length&&void 0===e[this.foreignKey]&&(e[this.foreignKey]=t)},e.prototype.make=function(t,e,r){return this.makeManyRelation(t,this.parent)},e.prototype.load=function(t,e,r,n){var o=this,i=this.getRelation(t,this.parent.entity,n);this.addConstraintForHasManyBy(i,e);var s=this.mapSingleRelations(i.get(),this.ownerKey);e.forEach(function(t){var e=o.getRelatedRecords(s,t[o.foreignKey]);t[r]=e})},e.prototype.addConstraintForHasManyBy=function(t,e){var r=this,n=e.reduce(function(t,e){return t.concat(e[r.foreignKey])},[]);t.where(this.ownerKey,n)},e.prototype.getRelatedRecords=function(t,e){return e.reduce(function(e,r){var n=t[r];return n&&e.push(n),e},[])},e}(Relation),HasManyThrough=function(t){function e(e,r,n,o,i,s,a){var u=t.call(this,e)||this;return u.related=u.model.relation(r),u.through=u.model.relation(n),u.firstKey=o,u.secondKey=i,u.localKey=s,u.secondLocalKey=a,u}return __extends$1(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,r){},e.prototype.make=function(t,e,r){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,r,n){var o=this,i=this.getRelation(t,this.related.entity,n),s=t.newQuery(this.through.entity);this.addEagerConstraintForThrough(s,e);var a=s.get();this.addEagerConstraintForRelated(i,a);var u=this.mapThroughRelations(a,i);e.forEach(function(t){var e=u[t[o.localKey]];t[r]=e||[]})},e.prototype.addEagerConstraintForThrough=function(t,e){t.where(this.firstKey,this.getKeys(e,this.localKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.where(this.secondKey,this.getKeys(e,this.secondLocalKey))},e.prototype.mapThroughRelations=function(t,e){var r=this,n=this.mapManyRelations(e.get(),this.secondKey);return t.reduce(function(t,e){var o=e[r.firstKey];t[o]||(t[o]=[]);var i=n[e[r.secondLocalKey]];return t[o]=t[o].concat(i),t},{})},e}(Relation),BelongsToMany=function(t){function e(e,r,n,o,i,s,a){var u=t.call(this,e)||this;return u.related=u.model.relation(r),u.pivot=u.model.relation(n),u.foreignPivotKey=o,u.relatedPivotKey=i,u.parentKey=s,u.relatedKey=a,u}return __extends$1(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,r){},e.prototype.make=function(t,e,r){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,r,n){var o=this,i=this.getRelation(t,this.related.entity,n),s=t.newQuery(this.pivot.entity);this.addEagerConstraintForPivot(s,e);var a=s.get();this.addEagerConstraintForRelated(i,a);var u=this.mapPivotRelations(a,i);e.forEach(function(t){var e=u[t[o.parentKey]];t[r]=e||[]})},e.prototype.addEagerConstraintForPivot=function(t,e){t.whereFk(this.foreignPivotKey,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.whereFk(this.relatedKey,this.getKeys(e,this.relatedPivotKey))},e.prototype.mapPivotRelations=function(t,e){var r=this,n=this.mapManyRelations(e.get(),this.relatedKey);return t.reduce(function(t,e){var o=e[r.foreignPivotKey];t[o]||(t[o]=[]);var i=n[e[r.relatedPivotKey]];return i&&(t[o]=t[o].concat(i)),t},{})},e.prototype.createPivots=function(t,e,r){var n=this;return this.pivot.primaryKey instanceof Array==!1?e:(Utils.forOwn(e[t.entity],function(t){var o=t[r];void 0!==o&&0!==o.length&&n.createPivotRecord(e,t,o)}),e)},e.prototype.createPivotRecord=function(t,e,r){var n=this;r.forEach(function(r){var o,i,s=e[n.parentKey],a=t[n.related.entity][r][n.relatedKey],u=a+"_"+s,c=t[n.pivot.entity]?t[n.pivot.entity][u]:{};t[n.pivot.entity]=__assign$1({},t[n.pivot.entity],((o={})[u]=__assign$1({},c,((i={$id:u})[n.foreignPivotKey]=s,i[n.relatedPivotKey]=a,i)),o))})},e}(Relation),MorphTo=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.id=r,o.type=n,o}return __extends$1(e,t),e.prototype.define=function(t){var e=this;return t.union(function(t,r){return r[e.type]})},e.prototype.attach=function(t,e,r){},e.prototype.make=function(t,e,r){if(!this.isOneRelation(t))return null;var n=e[this.type],o=this.model.relation(n);return o?new o(t):null},e.prototype.load=function(t,e,r,n){var o=this,i=this.getTypes(e).reduce(function(e,r){var i=o.getRelation(t,r,n);return e[r]=o.mapSingleRelations(i.get(),"$id"),e},{});e.forEach(function(t){var e=t[o.id],n=t[o.type],s=i[n][e];t[r]=s||null})},e.prototype.getTypes=function(t){var e=this;return t.reduce(function(t,r){var n=r[e.type];return!t.includes(n)&&t.push(n),t},[])},e}(Relation),MorphOne=function(t){function e(e,r,n,o,i){var s=t.call(this,e)||this;return s.related=s.model.relation(r),s.id=n,s.type=o,s.localKey=i,s}return __extends$1(e,t),e.prototype.define=function(t){return t.one(this.related)},e.prototype.attach=function(t,e,r){var n=r[this.related.entity]&&r[this.related.entity][t];n&&(n[this.id]=n[this.id]||e.$id,n[this.type]=n[this.type]||this.model.entity)},e.prototype.make=function(t,e,r){return this.isOneRelation(t)?new this.related(t):null},e.prototype.load=function(t,e,r,n){var o=this,i=this.getRelation(t,this.related.entity,n);this.addEagerConstraintForMorphOne(i,e,t.entity);var s=this.mapSingleRelations(i.get(),this.id);e.forEach(function(t){var e=s[t[o.localKey]];t[r]=e||null})},e.prototype.addEagerConstraintForMorphOne=function(t,e,r){t.whereFk(this.type,r).whereFk(this.id,this.getKeys(e,this.localKey))},e}(Relation),MorphMany=function(t){function e(e,r,n,o,i){var s=t.call(this,e)||this;return s.related=s.model.relation(r),s.id=n,s.type=o,s.localKey=i,s}return __extends$1(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,r){var n=this;if(Array.isArray(t)){var o=r[this.related.entity];t.forEach(function(t){var r=o[t];r[n.id]=r[n.id]||e.$id,r[n.type]=r[n.type]||n.model.entity})}},e.prototype.make=function(t,e,r){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,r,n){var o=this,i=this.getRelation(t,this.related.entity,n);this.addEagerConstraintForMorphMany(i,e,t.entity);var s=this.mapManyRelations(i.get(),this.id);e.forEach(function(t){var e=s[t[o.localKey]];t[r]=e||[]})},e.prototype.addEagerConstraintForMorphMany=function(t,e,r){t.whereFk(this.type,r).whereFk(this.id,this.getKeys(e,this.localKey))},e}(Relation),MorphToMany=function(t){function e(e,r,n,o,i,s,a,u){var c=t.call(this,e)||this;return c.related=c.model.relation(r),c.pivot=c.model.relation(n),c.relatedId=o,c.id=i,c.type=s,c.parentKey=a,c.relatedKey=u,c}return __extends$1(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,r){},e.prototype.make=function(t,e,r){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,r,n){var o=this,i=this.getRelation(t,this.related.entity,n),s=t.newQuery(this.pivot.entity);this.addEagerConstraintForPivot(s,e,t.entity);var a=s.get();this.addEagerConstraintForRelated(i,a);var u=this.mapPivotRelations(a,i);e.forEach(function(t){var e=u[t[o.parentKey]];t[r]=e||[]})},e.prototype.addEagerConstraintForPivot=function(t,e,r){t.whereFk(this.type,r).whereFk(this.id,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.whereFk(this.relatedKey,this.getKeys(e,this.relatedId))},e.prototype.mapPivotRelations=function(t,e){var r=this,n=this.mapManyRelations(e.get(),this.relatedKey);return t.reduce(function(t,e){var o=e[r.id];t[o]||(t[o]=[]);var i=n[e[r.relatedId]];return t[o]=t[o].concat(i),t},{})},e.prototype.createPivots=function(t,e,r){var n=this;return Utils.forOwn(e[t.entity],function(o){var i=t.query().newQuery(n.pivot.entity).where(n.id,o[n.parentKey]).where(n.type,t.entity).get().map(function(t){return t[n.parentKey]}),s=(o[r]||[]).filter(function(t){return!i.includes(t)});Array.isArray(s)&&0!==s.length&&n.createPivotRecord(t,e,o,s)}),e},e.prototype.createPivotRecord=function(t,e,r,n){var o=this;n.forEach(function(n){var i,s,a=r[o.parentKey],u=a+"_"+n+"_"+t.entity;e[o.pivot.entity]=__assign$1({},e[o.pivot.entity],((i={})[u]=((s={$id:u})[o.relatedId]=n,s[o.id]=a,s[o.type]=t.entity,s),i))})},e}(Relation),MorphedByMany=function(t){function e(e,r,n,o,i,s,a,u){var c=t.call(this,e)||this;return c.related=c.model.relation(r),c.pivot=c.model.relation(n),c.relatedId=o,c.id=i,c.type=s,c.parentKey=a,c.relatedKey=u,c}return __extends$1(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,r){},e.prototype.make=function(t,e,r){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,r,n){var o=this,i=this.getRelation(t,this.related.entity,n),s=t.newQuery(this.pivot.entity);this.addEagerConstraintForPivot(s,e,this.related.entity);var a=s.get();this.addEagerConstraintForRelated(i,a);var u=this.mapPivotRelations(a,i);e.forEach(function(t){var e=u[t[o.parentKey]];t[r]=e||[]})},e.prototype.addEagerConstraintForPivot=function(t,e,r){t.whereFk(this.type,r).whereFk(this.relatedId,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.whereFk(this.relatedKey,this.getKeys(e,this.id))},e.prototype.mapPivotRelations=function(t,e){var r=this,n=this.mapManyRelations(e.get(),this.relatedKey);return t.reduce(function(t,e){var o=e[r.relatedId];t[o]||(t[o]=[]);var i=n[e[r.id]];return t[o]=t[o].concat(i),t},{})},e.prototype.createPivots=function(t,e,r){var n=this;return Utils.forOwn(e[t.entity],function(t){var o=t[r];Array.isArray(o)&&n.createPivotRecord(e,t,o)}),e},e.prototype.createPivotRecord=function(t,e,r){var n=this;r.forEach(function(r){var o,i,s=e[n.parentKey],a=r+"_"+s+"_"+n.related.entity;t[n.pivot.entity]=__assign$1({},t[n.pivot.entity],((o={})[a]=((i={$id:a})[n.relatedId]=s,i[n.id]=r,i[n.type]=n.related.entity,i),o))})},e}(Relation),Serializer=function(){function t(){}return t.serialize=function(t){var e=this,r=t.$fields();return Object.keys(r).reduce(function(r,n){var o=t[n];return r[n]=e.serializeValue(o),r},{})},t.serializeValue=function(t){return t instanceof Model$1?this.serializeItem(t):Array.isArray(t)?this.serializeCollection(t):t},t.serializeItem=function(t){return t.$toJson()},t.serializeCollection=function(t){return t.map(function(t){return t instanceof Model$1?t.$toJson():t})},t}(),NoKey=function(){function t(){}return t.set=function(){this.value=""+this.prefix+this.count},t.get=function(){return this.value},t.increment=function(){return this.count++,this.set(),this.get()},t.count=0,t.prefix="_no_key_",t.value="",t}(),Model$1=function(){function t(t){this.$id=null,this.$fill(t)}return t.fields=function(){return{}},t.getFields=function(){return this.cachedFields?this.cachedFields:(this.cachedFields=this.fields(),this.cachedFields)},t.attr=function(t,e){return new Attr(this,t,e)},t.string=function(t,e){return new String$1(this,t,e)},t.number=function(t,e){return new Number$1(this,t,e)},t.boolean=function(t,e){return new Boolean$1(this,t,e)},t.increment=function(){return new Increment(this)},t.hasOne=function(t,e,r){return new HasOne(this,t,e,this.localKey(r))},t.belongsTo=function(t,e,r){return new BelongsTo(this,t,e,this.relation(t).localKey(r))},t.hasMany=function(t,e,r){return new HasMany(this,t,e,this.localKey(r))},t.hasManyBy=function(t,e,r){return new HasManyBy(this,t,e,this.relation(t).localKey(r))},t.hasManyThrough=function(t,e,r,n,o,i){return new HasManyThrough(this,t,e,r,n,this.localKey(o),this.relation(e).localKey(i))},t.belongsToMany=function(t,e,r,n,o,i){return new BelongsToMany(this,t,e,r,n,this.localKey(o),this.relation(t).localKey(i))},t.morphTo=function(t,e){return new MorphTo(this,t,e)},t.morphOne=function(t,e,r,n){return new MorphOne(this,t,e,r,this.localKey(n))},t.morphMany=function(t,e,r,n){return new MorphMany(this,t,e,r,this.localKey(n))},t.morphToMany=function(t,e,r,n,o,i,s){return new MorphToMany(this,t,e,r,n,o,this.localKey(i),this.relation(t).localKey(s))},t.morphedByMany=function(t,e,r,n,o,i,s){return new MorphedByMany(this,t,e,r,n,o,this.localKey(i),this.relation(t).localKey(s))},t.mutators=function(){return{}},t.database=function(){return Container.database},t.store=function(){return this.database().store},t.namespace=function(t){return this.database().namespace+"/"+this.entity+"/"+t},t.getters=function(t){return this.store().getters[this.namespace(t)]},t.dispatch=function(t,e){return this.store().dispatch(this.namespace(t),e)},t.commit=function(t){this.store().commit(this.database().namespace+"/$mutate",{entity:this.entity,callback:t})},t.all=function(){return this.getters("all")()},t.find=function(t){return this.getters("find")(t)},t.findIn=function(t){return this.getters("findIn")(t)},t.query=function(){return this.getters("query")()},t.new=function(){return this.dispatch("new")},t.create=function(t){return this.dispatch("create",t)},t.insert=function(t){return this.dispatch("insert",t)},t.update=function(t){return this.dispatch("update",t)},t.insertOrUpdate=function(t){return this.dispatch("insertOrUpdate",t)},t.delete=function(t){return this.dispatch("delete",t)},t.deleteAll=function(){return this.dispatch("deleteAll")},t.id=function(t){var e=this.primaryKey;return"string"==typeof e?t[e]:e.map(function(e){return t[e]||NoKey.increment()}).join("_")},t.localKey=function(t){return t||("string"==typeof this.primaryKey?this.primaryKey:"id")},t.relation=function(t){return"string"!=typeof t?t:this.database().model(t)},t.getAttributeClass=function(t){switch(t){case"increment":return Increment;default:throw Error('The attribute name "'+t+"\" doesn't exist.")}},t.getFieldsByAttribute=function(t){var e=this.getAttributeClass(t),r=this.fields();return Object.keys(r).reduce(function(t,n){var o=r[n];return o instanceof e&&(t[n]=o),t},{})},t.getIncrementFields=function(){return this.getFieldsByAttribute("increment")},t.hasIncrementFields=function(){return Object.keys(this.getIncrementFields()).length>0},t.pivotFields=function(){var t=[];return Utils.forOwn(this.fields(),function(e,r){var n;(e instanceof BelongsToMany||e instanceof MorphToMany||e instanceof MorphedByMany)&&t.push(((n={})[r]=e,n))}),t},t.hasPivotFields=function(){return this.pivotFields().length>0},t.hydrate=function(t){return new this(t).$toJson()},t.prototype.$self=function(){return this.constructor},t.prototype.$fields=function(){return this.$self().getFields()},t.prototype.$store=function(){return this.$self().store()},t.prototype.$namespace=function(t){return this.$self().namespace(t)},t.prototype.$getters=function(t){return this.$self().getters(t)},t.prototype.$dispatch=function(t,e){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(r){return[2,this.$self().dispatch(t,e)]})})},t.prototype.$all=function(){return this.$getters("all")()},t.prototype.$find=function(t){return this.$getters("find")(t)},t.prototype.$findIn=function(t){return this.$getters("findIn")(t)},t.prototype.$query=function(){return this.$getters("query")()},t.prototype.$create=function(t){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(e){return[2,this.$dispatch("create",t)]})})},t.prototype.$insert=function(t){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(e){return[2,this.$dispatch("insert",t)]})})},t.prototype.$update=function(t){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(e){return Array.isArray(t)?[2,this.$dispatch("update",t)]:void 0!==t.where?[2,this.$dispatch("update",t)]:void 0===this.$self().id(t)?[2,this.$dispatch("update",{where:this.$id,data:t})]:[2,this.$dispatch("update",t)]})})},t.prototype.$insertOrUpdate=function(t){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(e){return[2,this.$dispatch("insertOrUpdate",t)]})})},t.prototype.$save=function(){return __awaiter$1(this,void 0,void 0,function(){var t,e,r,n=this;return __generator$1(this,function(o){switch(o.label){case 0:return t=this.$self().getFields(),e=Object.keys(t).reduce(function(e,r){return t[r]instanceof Type&&(e[r]=n[r]),e},{}),[4,this.$dispatch("insertOrUpdate",{data:e})];case 1:return r=o.sent(),this.$fill(r[this.$self().entity][0]),[2,this]}})})},t.prototype.$delete=function(t){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(e){return t?[2,this.$dispatch("delete",t)]:null===this.$id?[2,null]:[2,this.$dispatch("delete",this.$id)]})})},t.prototype.$deleteAll=function(){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(t){return[2,this.$dispatch("deleteAll")]})})},t.prototype.$fill=function(t){var e=this,r=t||{},n=this.$fields();Object.keys(n).forEach(function(t){var o=n[t],i=r[t];e[t]=o.make(i,r,t)}),void 0!==r.$id&&(this.$id=r.$id)},t.prototype.$toJson=function(){return Serializer.serialize(this)},t.prototype.toJSON=function(){return this.$toJson()},t.primaryKey="id",t.state={},t}();function isImmutable(t){return!(!t||"function"!=typeof t.hasOwnProperty||!(t.hasOwnProperty("__ownerID")||t._map&&t._map.hasOwnProperty("__ownerID")))}function denormalizeImmutable(t,e,r){return Object.keys(t).reduce(function(e,n){var o=""+n;return e.has(o)?e.set(o,r(e.get(o),t[o])):e},e)}var RequestTypes,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},inherits$2=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},possibleConstructorReturn=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},getDefaultGetId=function(t){return function(e){return isImmutable(e)?e.get(t):e[t]}},EntitySchema=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(classCallCheck(this,t),!e||"string"!=typeof e)throw new Error("Expected a string key for Entity, but found "+e+".");var o=n.idAttribute,i=void 0===o?"id":o,s=n.mergeStrategy,a=void 0===s?function(t,e){return _extends({},t,e)}:s,u=n.processStrategy,c=void 0===u?function(t){return _extends({},t)}:u;this._key=e,this._getId="function"==typeof i?i:getDefaultGetId(i),this._idAttribute=i,this._mergeStrategy=a,this._processStrategy=c,this.define(r)}return t.prototype.define=function(t){this.schema=Object.keys(t).reduce(function(e,r){var n,o=t[r];return _extends({},e,((n={})[r]=o,n))},this.schema||{})},t.prototype.getId=function(t,e,r){return this._getId(t,e,r)},t.prototype.merge=function(t,e){return this._mergeStrategy(t,e)},t.prototype.normalize=function(t,e,r,n,o){var i=this,s=this._processStrategy(t,e,r);return Object.keys(this.schema).forEach(function(t){if(s.hasOwnProperty(t)&&"object"===_typeof(s[t])){var e=i.schema[t];s[t]=n(s[t],s,t,e,o)}}),o(this,s,t,e,r),this.getId(t,e,r)},t.prototype.denormalize=function(t,e){var r=this;return isImmutable(t)?denormalizeImmutable(this.schema,t,e):(Object.keys(this.schema).forEach(function(n){if(t.hasOwnProperty(n)){var o=r.schema[n];t[n]=e(t[n],o)}}),t)},createClass(t,[{key:"key",get:function(){return this._key}},{key:"idAttribute",get:function(){return this._idAttribute}}]),t}(),PolymorphicSchema=function(){function t(e,r){classCallCheck(this,t),r&&(this._schemaAttribute="string"==typeof r?function(t){return t[r]}:r),this.define(e)}return t.prototype.define=function(t){this.schema=t},t.prototype.getSchemaAttribute=function(t,e,r){return!this.isSingleSchema&&this._schemaAttribute(t,e,r)},t.prototype.inferSchema=function(t,e,r){if(this.isSingleSchema)return this.schema;var n=this.getSchemaAttribute(t,e,r);return this.schema[n]},t.prototype.normalizeValue=function(t,e,r,n,o){var i=this.inferSchema(t,e,r);if(!i)return t;var s=n(t,e,r,i,o);return this.isSingleSchema||void 0===s||null===s?s:{id:s,schema:this.getSchemaAttribute(t,e,r)}},t.prototype.denormalizeValue=function(t,e){var r=isImmutable(t)?t.get("schema"):t.schema;if(!this.isSingleSchema&&!r)return t;var n=isImmutable(t)?t.get("id"):t.id,o=this.isSingleSchema?this.schema:this.schema[r];return e(n||t,o)},createClass(t,[{key:"isSingleSchema",get:function(){return!this._schemaAttribute}}]),t}(),UnionSchema=function(t){function e(r,n){if(classCallCheck(this,e),!n)throw new Error('Expected option "schemaAttribute" not found on UnionSchema.');return possibleConstructorReturn(this,t.call(this,r,n))}return inherits$2(e,t),e.prototype.normalize=function(t,e,r,n,o){return this.normalizeValue(t,e,r,n,o)},e.prototype.denormalize=function(t,e){return this.denormalizeValue(t,e)},e}(PolymorphicSchema),ValuesSchema=function(t){function e(){return classCallCheck(this,e),possibleConstructorReturn(this,t.apply(this,arguments))}return inherits$2(e,t),e.prototype.normalize=function(t,e,r,n,o){var i=this;return Object.keys(t).reduce(function(e,r,s){var a,u=t[r];return void 0!==u&&null!==u?_extends({},e,((a={})[r]=i.normalizeValue(u,t,r,n,o),a)):e},{})},e.prototype.denormalize=function(t,e){var r=this;return Object.keys(t).reduce(function(n,o){var i,s=t[o];return _extends({},n,((i={})[o]=r.denormalizeValue(s,e),i))},{})},e}(PolymorphicSchema),validateSchema=function(t){if(Array.isArray(t)&&t.length>1)throw new Error("Expected schema definition to be a single schema, but found "+t.length+".");return t[0]},getValues=function(t){return Array.isArray(t)?t:Object.keys(t).map(function(e){return t[e]})},normalize=function(t,e,r,n,o,i){return t=validateSchema(t),getValues(e).map(function(e,s){return o(e,r,n,t,i)})},ArraySchema=function(t){function e(){return classCallCheck(this,e),possibleConstructorReturn(this,t.apply(this,arguments))}return inherits$2(e,t),e.prototype.normalize=function(t,e,r,n,o){var i=this;return getValues(t).map(function(t,s){return i.normalizeValue(t,e,r,n,o)}).filter(function(t){return void 0!==t&&null!==t})},e.prototype.denormalize=function(t,e){var r=this;return t&&t.map?t.map(function(t){return r.denormalizeValue(t,e)}):t},e}(PolymorphicSchema),_normalize=function(t,e,r,n,o,i){var s=_extends({},e);return Object.keys(t).forEach(function(r){var n=t[r],a=o(e[r],e,r,n,i);void 0===a||null===a?delete s[r]:s[r]=a}),s},_denormalize=function(t,e,r){if(isImmutable(e))return denormalizeImmutable(t,e,r);var n=_extends({},e);return Object.keys(t).forEach(function(e){n[e]&&(n[e]=r(n[e],t[e]))}),n},ObjectSchema=function(){function t(e){classCallCheck(this,t),this.define(e)}return t.prototype.define=function(t){this.schema=Object.keys(t).reduce(function(e,r){var n,o=t[r];return _extends({},e,((n={})[r]=o,n))},this.schema||{})},t.prototype.normalize=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return _normalize.apply(void 0,[this.schema].concat(e))},t.prototype.denormalize=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return _denormalize.apply(void 0,[this.schema].concat(e))},t}(),visit=function t(e,r,n,o,i){return"object"===(void 0===e?"undefined":_typeof(e))&&e?"object"!==(void 0===o?"undefined":_typeof(o))||o.normalize&&"function"==typeof o.normalize?o.normalize(e,r,n,t,i):(Array.isArray(o)?normalize:_normalize)(o,e,r,n,t,i):e},addEntities=function(t){return function(e,r,n,o,i){var s=e.key,a=e.getId(n,o,i);s in t||(t[s]={});var u=t[s][a];t[s][a]=u?e.merge(u,r):r}},normalize$1=function(t,e){if(!t||"object"!==(void 0===t?"undefined":_typeof(t)))throw new Error('Unexpected input given to normalize. Expected type to be "object", found "'+(void 0===t?"undefined":_typeof(t))+'".');var r={},n=addEntities(r);return{entities:r,result:visit(t,t,null,e,n)}},Normalizer=function(){function t(){}return t.process=function(t,e){if(Utils.isEmpty(e))return{};var r=t.database().schemas[t.model.entity],n=Array.isArray(e)?[r]:r;return normalize$1(e,n).entities},t}(),PivotCreator=function(){function t(){}return t.process=function(t,e){return Object.keys(e).forEach(function(r){var n=t.getModel(r);n.hasPivotFields()&&Utils.forOwn(n.pivotFields(),function(t){Utils.forOwn(t,function(t,r){t.createPivots(n,e,r)})})}),e},t}(),Incrementer=function(){function t(){}return t.process=function(t,e){var r=this;return Utils.mapValues(e,function(e,n){var o=t.newQuery(n);return o.model.hasIncrementFields()?(r.processRecordsByFields(e,o),e):e})},t.processRecordsByFields=function(t,e){var r=this,n=e.model.getIncrementFields();Utils.forOwn(n,function(n,o){r.processRecords(t,e,o)})},t.processRecords=function(t,e,r){var n=this.max(t,e,r);Utils.forOwn(t,function(t){"number"!=typeof t[r]&&(t[r]=++n)})},t.max=function(t,e,r){var n=e.max(r),o=Math.max.apply(Math,Utils.map(t,function(t){var e=t[r];return"number"==typeof e?e:0}));return Math.max(o,n)},t}(),Attacher=function(){function t(){}return t.process=function(t,e){return Utils.forOwn(e,function(r,n){var o=t.getModel(n).fields();Utils.forOwn(r,function(t){Utils.forOwn(t,function(r,n){var i=o[n];i instanceof Relation&&i.attach(r,t,e)})})}),e},t}(),IdFixer=function(){function t(){}return t.process=function(t,e){var r=this;return Utils.mapValues(e,function(e,n){var o=t.newQuery(n);return r.processRecords(e,o)})},t.processRecords=function(t,e){return Object.keys(t).reduce(function(r,n){var o=t[n],i=e.model.id(o),s=isNaN(i)?i:i.toString();return void 0===i||n===s?(r[n]=o,r):(r[s]=__assign$1({},o,{$id:i}),r)},{})},t}(),Processor=function(){function t(){}return t.normalize=function(t,e){var r=Normalizer.process(t,e);return r=Incrementer.process(t,r),r=Attacher.process(t,r),r=PivotCreator.process(t,r),r=Incrementer.process(t,r),r=IdFixer.process(t,r)},t}(),WhereFilter=function(){function t(){}return t.filter=function(t,e){var r=this;return 0===t.wheres.length?e:e.filter(function(e){return r.check(t,e)})},t.check=function(t,e){var r=Utils.groupBy(t.wheres,function(t){return t.boolean}),n=this.getComparator(t,e),o=[];return r.and&&o.push(r.and.every(n)),r.or&&o.push(r.or.some(n)),-1!==o.indexOf(!0)},t.getComparator=function(t,e){var r=this;return function(n){if("function"==typeof n.field){var o=new Query(t.rootState,t.entity),i=r.executeWhereClosure(o,e,n.field);if("boolean"==typeof i)return i;var s=o.get();return!Utils.isEmpty(s.filter(function(t){return t.$id===e.$id}))}return"function"==typeof n.value?n.value(e[n.field]):Array.isArray(n.value)?-1!==n.value.indexOf(e[n.field]):e[n.field]===n.value}},t.executeWhereClosure=function(t,e,r){return 3!==r.length?r(e,t):r(e,t,new t.model(e))},t}(),OrderByFilter=function(){function t(){}return t.filter=function(t,e){if(0===t.orders.length)return e;var r=t.orders.map(function(t){return t.field}),n=t.orders.map(function(t){return t.direction});return Utils.orderBy(e,r,n)},t}(),LimitFilter=function(){function t(){}return t.filter=function(t,e){return e.slice(t.offsetNumber,t.offsetNumber+t.limitNumber)},t}(),Filter=function(){function t(){}return t.where=function(t,e){return WhereFilter.filter(t,e)},t.orderBy=function(t,e){return OrderByFilter.filter(t,e)},t.limit=function(t,e){return LimitFilter.filter(t,e)},t}(),Loader=function(){function t(){}return t.with=function(t,e,r){var n=this;"*"!==e?e instanceof Array?e.forEach(function(e){return n.with(t,e,r)}):this.parseWithRelations(t,e.split("."),r):this.withAll(t)},t.withAll=function(t,e){void 0===e&&(e=function(){return null});var r=t.model.getFields();for(var n in r)r[n]instanceof Relation&&this.with(t,n,e)},t.withAllRecursive=function(t,e){this.withAll(t,function(t){e>0&&t.withAllRecursive(e-1)})},t.setEagerLoad=function(t,e,r){void 0===r&&(r=null),t.load[e]||(t.load[e]=[]),r&&t.load[e].push(r)},t.parseWithRelations=function(t,e,r){var n=this,o=e[0];o.split("|").forEach(function(o){1!==e.length?n.setEagerLoad(t,o):n.setEagerLoad(t,o,r)}),1!==e.length&&(e.shift(),this.addNestedWiths(t,o,e,r))},t.addNestedWiths=function(t,e,r,n){this.setEagerLoad(t,e,function(t){t.with(r.join("."),n)})},t.eagerLoadRelations=function(t,e){var r=t.model.getFields();for(var n in t.load){var o=t.load[n],i=r[n];i instanceof Relation&&i.load(t,e,n,o)}},t}(),Rollcaller=function(){function t(){}return t.has=function(t,e,r,n){this.setHas(t,e,"exists",r,n)},t.hasNot=function(t,e,r,n){this.setHas(t,e,"doesntExist",r,n)},t.whereHas=function(t,e,r){this.setHas(t,e,"exists",void 0,void 0,r)},t.whereHasNot=function(t,e,r){this.setHas(t,e,"doesntExist",void 0,void 0,r)},t.setHas=function(t,e,r,n,o,i){void 0===n&&(n=">="),void 0===o&&(o=1),void 0===i&&(i=null),"number"!=typeof n?t.have.push({relation:e,type:r,operator:n,count:o,constraint:i}):t.have.push({relation:e,type:r,operator:">=",count:n,constraint:i})},t.applyConstraints=function(t){if(0!==t.have.length){var e=t.newQuery();this.addHasWhereConstraints(t,e),this.addHasConstraints(t,e.get())}},t.addHasWhereConstraints=function(t,e){t.have.forEach(function(t){e.with(t.relation,t.constraint)})},t.addHasConstraints=function(t,e){var r=this.getComparators(t),n=[];e.forEach(function(t){r.every(function(e){return e(t)})&&n.push(t.$id)}),t.whereIdIn(n)},t.getComparators=function(t){var e=this;return t.have.map(function(t){return e.getComparator(t)})},t.getComparator=function(t){var e=this,r=this.getCountComparator(t.operator);return function(n){var o=e.getRelationshipCount(n[t.relation]),i=r(o,t.count);return"exists"===t.type?i:!i}},t.getRelationshipCount=function(t){return Array.isArray(t)?t.length:t?1:0},t.getCountComparator=function(t){switch(t){case"=":return function(t,e){return t===e};case">":return function(t,e){return t>e};case">=":return function(t,e){return t>=e};case"<":return function(t,e){return t>0&&t<e};case"<=":return function(t,e){return t>0&&t<=e};default:return function(t,e){return t===e}}},t}(),Hook=function(){function t(t){this.indexToBeDeleted=[],this.query=t}return t.on=function(t,e,r){void 0===r&&(r=!1);var n=this.lastHookId+1;return this.lastHookId=n,this.hooks[t]||(this.hooks[t]=[]),this.hooks[t].push({callback:e,once:r,uid:n}),n},t.off=function(t){var e=this,r=!1;return Object.keys(this.hooks).some(function(n){var o=e.hooks[n],i=o.findIndex(function(e){return e.uid===t});return-1!==i&&(o.splice(i,1),r=!0),r}),r},t.prototype.self=function(){return this.constructor},t.prototype.getHook=function(t){return this.query.model[t]||null},t.prototype.getGlobalHook=function(t){return this.self().hooks[t]||null},t.prototype.has=function(t){return!!this.getHook(t)||!!this.getGlobalHook(t)},t.prototype.executeSelectHook=function(t,e){return this.has(t)?(e=this.executeLocalSelectHook(t,e),e=this.executeGlobalSelectHook(t,e)):e},t.prototype.executeLocalSelectHook=function(t,e){var r=this.getHook(t);return r?r(e,this.query.entity):e},t.prototype.executeGlobalSelectHook=function(t,e){var r=this,n=this.getGlobalHook(t);if(!n)return e;var o=[];return n.forEach(function(t,n){var i=t.callback,s=t.once;e=i.call(r.query,e,r.query.entity),s&&o.push(n)}),o.reverse().forEach(function(t){n.splice(t,1)}),e},t.prototype.executeMutationHookOnRecords=function(t,e){var r=this;this.has(t)&&(Object.keys(e).forEach(function(n){!1===r.executeMutationHook(t,e[n])&&delete e[n]}),this.removeGlobalHook(t))},t.prototype.executeMutationHook=function(t,e){return!1!==this.executeLocalMutationHook(t,e)&&(!1!==this.executeGlobalMutationHook(t,e)&&void 0)},t.prototype.executeLocalMutationHook=function(t,e){var r=this.getHook(t);if(r)return r(e,this.query.entity)},t.prototype.executeGlobalMutationHook=function(t,e){var r=this,n=this.getGlobalHook(t);if(n){var o=[];return n.forEach(function(t,n){o.push(t.callback.call(r.query,e,r.query.entity)),t.once&&r.indexToBeDeleted.push(n)}),!o.includes(!1)&&void 0}},t.prototype.removeGlobalHook=function(t){var e=this.getGlobalHook(t);e&&this.indexToBeDeleted.reverse().forEach(function(t){e.splice(t,1)})},t.hooks={},t.lastHookId=0,t}(),Query=function(){function t(t,e){this.idFilter=null,this.cancelIdFilter=!1,this.joinedIdFilter=null,this.wheres=[],this.have=[],this.orders=[],this.offsetNumber=0,this.limitNumber=Math.pow(2,53)-1,this.load={},this.rootState=t,this.state=t[e],this.entity=e,this.model=this.getModel(e),this.module=this.getModule(e),this.hook=new Hook(this)}return t.database=function(){return Container.database},t.getModel=function(t){return this.database().model(t)},t.getModels=function(){return this.database().models()},t.getModule=function(t){return this.database().module(t)},t.getModules=function(){return this.database().modules()},t.deleteAll=function(t){var e=this,r=this.getModels();Utils.forOwn(r,function(r,n){t[n]&&new e(t,n).deleteAll()})},t.on=function(t,e,r){return Hook.on(t,e,r)},t.off=function(t){return Hook.off(t)},t.prototype.self=function(){return this.constructor},t.prototype.newQuery=function(e){return e=e||this.entity,new t(this.rootState,e)},t.prototype.database=function(){return this.self().database()},t.prototype.getModel=function(t){var e=t||this.entity;return this.self().getModel(e)},t.prototype.getModels=function(){return this.self().getModels()},t.prototype.getModule=function(t){var e=t||this.entity;return this.self().getModule(e)},t.prototype.getModules=function(){return this.self().getModules()},t.prototype.all=function(){return this.get()},t.prototype.find=function(t){return this.item(this.state.data[t])},t.prototype.findIn=function(t){var e=this;return t.map(function(t){return e.state.data[t]}).filter(function(t){return t})},t.prototype.get=function(){var t=this.select();return this.collect(t)},t.prototype.first=function(){var t=this.select();return this.item(t[0])},t.prototype.last=function(){var t=this.select();return this.item(t[t.length-1])},t.prototype.where=function(t,e){return this.isIdfilterable(t)&&this.setIdFilter(e),this.wheres.push({field:t,value:e,boolean:"and"}),this},t.prototype.orWhere=function(t,e){return this.cancelIdFilter=!0,this.wheres.push({field:t,value:e,boolean:"or"}),this},t.prototype.whereId=function(t){return this.where(this.model.primaryKey,t)},t.prototype.whereIdIn=function(t){return this.where(this.model.primaryKey,t)},t.prototype.whereFk=function(t,e){var r=Array.isArray(e)?e:[e];return t===this.model.primaryKey?(this.setJoinedIdFilter(r),this):(this.where(t,r),this)},t.prototype.isIdfilterable=function(t){return t===this.model.primaryKey&&!this.cancelIdFilter},t.prototype.setIdFilter=function(t){var e=this,r=Array.isArray(t)?t:[t];null!==this.idFilter?this.idFilter=new Set(r.filter(function(t){return e.idFilter.has(t)})):this.idFilter=new Set(r)},t.prototype.setJoinedIdFilter=function(t){var e=this;null!==this.joinedIdFilter?this.joinedIdFilter=new Set(t.filter(function(t){return e.joinedIdFilter.has(t)})):this.joinedIdFilter=new Set(t)},t.prototype.orderBy=function(t,e){return void 0===e&&(e="asc"),this.orders.push({field:t,direction:e}),this},t.prototype.offset=function(t){return this.offsetNumber=t,this},t.prototype.limit=function(t){return this.limitNumber=t,this},t.prototype.with=function(t,e){return void 0===e&&(e=null),Loader.with(this,t,e),this},t.prototype.withAll=function(){return Loader.withAll(this),this},t.prototype.withAllRecursive=function(t){return void 0===t&&(t=3),Loader.withAllRecursive(this,t),this},t.prototype.has=function(t,e,r){return Rollcaller.has(this,t,e,r),this},t.prototype.hasNot=function(t,e,r){return Rollcaller.hasNot(this,t,e,r),this},t.prototype.whereHas=function(t,e){return Rollcaller.whereHas(this,t,e),this},t.prototype.whereHasNot=function(t,e){return Rollcaller.whereHasNot(this,t,e),this},t.prototype.records=function(){var t=this;return this.finalizeIdFilter(),this.getIdsToLookup().map(function(e){var r=t.state.data[e];return r instanceof Model$1?r:t.hydrate(r)})},t.prototype.finalizeIdFilter=function(){this.cancelIdFilter&&null!==this.idFilter&&(this.where(this.model.primaryKey,Array.from(this.idFilter.values())),this.idFilter=null)},t.prototype.getIdsToLookup=function(){var t=this;return this.idFilter&&this.joinedIdFilter?Array.from(this.idFilter.values()).filter(function(e){return t.joinedIdFilter.has(e)}):this.idFilter||this.joinedIdFilter?Array.from((this.idFilter||this.joinedIdFilter).values()):Object.keys(this.state.data)},t.prototype.select=function(){Rollcaller.applyConstraints(this);var t=this.records();return t=this.hook.executeSelectHook("beforeSelect",t),t=this.filterWhere(t),t=this.hook.executeSelectHook("afterWhere",t),t=this.filterOrderBy(t),t=this.hook.executeSelectHook("afterOrderBy",t),t=this.filterLimit(t),t=this.hook.executeSelectHook("afterLimit",t)},t.prototype.filterWhere=function(t){return Filter.where(this,t)},t.prototype.filterOrderBy=function(t){return Filter.orderBy(this,t)},t.prototype.filterLimit=function(t){return Filter.limit(this,t)},t.prototype.count=function(){return this.get().length},t.prototype.max=function(t){var e=this.get().reduce(function(e,r){return"number"==typeof r[t]&&e.push(r[t]),e},[]);return 0===e.length?0:Math.max.apply(Math,e)},t.prototype.min=function(t){var e=this.get().reduce(function(e,r){return"number"==typeof r[t]&&e.push(r[t]),e},[]);return 0===e.length?0:Math.min.apply(Math,e)},t.prototype.sum=function(t){return this.get().reduce(function(e,r){return"number"==typeof r[t]&&(e+=r[t]),e},0)},t.prototype.item=function(t){if(!t)return null;if(Object.keys(this.load).length>0){t=new this.model(t);var e=this.hook.executeSelectHook("beforeRelations",[t]);t=e[0],Loader.eagerLoadRelations(this,[t]),t=(e=this.hook.executeSelectHook("afterRelations",[t]))[0]}return t},t.prototype.collect=function(t){var e=this;return t.length<1?[]:(Object.keys(this.load).length>0&&(t=t.map(function(t){return new e.model(t)}),t=this.hook.executeSelectHook("beforeRelations",t),Loader.eagerLoadRelations(this,t),t=this.hook.executeSelectHook("afterRelations",t)),t)},t.prototype.new=function(){var t=(new this.model).$toJson();return this.insert(t,{})[this.entity][0]},t.prototype.create=function(t,e){return this.persist(t,"create",e)},t.prototype.createMany=function(t){var e=this,r=this.hydrateMany(t);return this.commit("create",r,function(){e.state.data=r}),this.map(r)},t.prototype.insert=function(t,e){return this.persist(t,"insert",e)},t.prototype.insertMany=function(t){var e=this,r=this.hydrateMany(t);return this.commit("create",r,function(){e.state.data=__assign$1({},e.state.data,r)}),this.map(r)},t.prototype.update=function(t,e,r){if(Array.isArray(t))return this.persist(t,"update",r);if("function"==typeof t){if(!e)throw new Error("You must specify `where` to update records by specifying `data` as a closure.");return"function"==typeof e?this.updateByCondition(t,e):this.updateById(t,e)}if("function"==typeof e)return this.updateByCondition(t,e);if(!e)return this.persist(t,"update",r);if(Array.isArray(this.model.primaryKey))throw new Error("\n        You can't specify `where` value as `string` or `number` when you\n        have a composite key defined in your model. Please include composite\n        keys to the `data` fields.\n      ");return this.updateById(t,e)},t.prototype.updateMany=function(t){var e=this.combine(t);return this.commitUpdate(e)},t.prototype.updateById=function(t,e){var r;e="number"==typeof e?e.toString():e;var n=this.state.data[e];if(!n)return null;var o=((r={})[e]=this.processUpdate(t,n),r);return this.commitUpdate(o),o[e]},t.prototype.updateByCondition=function(t,e){var r=this,n=Object.keys(this.state.data).reduce(function(n,o){var i=r.state.data[o];return e(i)?(n[o]=r.processUpdate(t,i),n):n},{});return this.commitUpdate(n)},t.prototype.processUpdate=function(t,e){return"function"==typeof t?(t(e),e):this.hydrate(__assign$1({},e,t))},t.prototype.commitUpdate=function(t){var e=this;return t=this.updateIndexes(t),this.commit("update",t,function(){e.state.data=__assign$1({},e.state.data,t)}),this.map(t)},t.prototype.updateIndexes=function(t){var e=this;return Object.keys(t).reduce(function(t,r){var n=t[r],o=String(e.model.id(n));return r!==o&&(n.$id=o,t[o]=n,delete t[r]),t},t)},t.prototype.insertOrUpdate=function(t,e){return this.persist(t,"insertOrUpdate",e)},t.prototype.insertOrUpdateMany=function(t){var e=this,r={},n={};return Object.keys(t).forEach(function(o){var i=t[o];e.state.data[o]?n[o]=i:r[o]=i}),this.insertMany(r).concat(this.updateMany(n))},t.prototype.persist=function(t,e,r){var n=this;return t=this.normalize(t),Utils.isEmpty(t)?("create"===e&&(this.state.data={}),{}):Object.keys(t).reduce(function(o,i){var s=n.newQuery(i)[n.getPersistMethod(i,e,r)+"Many"](t[i]);return s.length>0&&(o[i]=s),o},{})},t.prototype.getPersistMethod=function(t,e,r){return r.create&&r.create.includes(t)?"create":r.insert&&r.insert.includes(t)?"insert":r.update&&r.update.includes(t)?"update":r.insertOrUpdate&&r.insertOrUpdate.includes(t)?"insertOrUpdate":e},t.prototype.delete=function(t){return"function"==typeof t?this.deleteByCondition(t):this.deleteById(t)},t.prototype.deleteById=function(t){var e;t="number"==typeof t?t.toString():t;var r=this.state.data[t];if(!r)return null;var n=((e={})[t]=r,e);return this.commitDelete(n)[0]},t.prototype.deleteByCondition=function(t){var e=this,r=Object.keys(this.state.data).reduce(function(r,n){var o=e.state.data[n];return t(o)?(r[n]=o,r):r},{});return this.commitDelete(r)},t.prototype.deleteAll=function(){var t=this.state.data;this.commitDelete(t)},t.prototype.commitDelete=function(t){var e=this;return this.commit("delete",t,function(){var r=Object.keys(t);e.state.data=Object.keys(e.state.data).reduce(function(t,n){return r.includes(n)||(t[n]=e.state.data[n]),t},{})}),this.map(t)},t.prototype.normalize=function(t){return Processor.normalize(this,t)},t.prototype.hydrate=function(t){return new(0,this.model)(t)},t.prototype.hydrateMany=function(t){var e=this;return Object.keys(t).reduce(function(r,n){var o=t[n];return r[n]=e.hydrate(o),r},{})},t.prototype.combine=function(t){var e=this;return Object.keys(t).reduce(function(r,n){var o=e.state.data[n];if(!o)return r;var i=t[n];return r[n]=e.hydrate(__assign$1({},o,i)),r},{})},t.prototype.map=function(t){return Object.keys(t).map(function(e){return t[e]})},t.prototype.commit=function(t,e,r){var n=""+t.charAt(0).toUpperCase()+t.slice(1);this.hook.executeMutationHookOnRecords("before"+n,e),r(),this.hook.executeMutationHookOnRecords("after"+n,e)},t}();!function(t){t.GET="GET",t.POST="POST",t.PUT="PUT",t.PATCH="PATCH",t.DELETE="DELETE",t.OPTIONS="OPTIONS"}(RequestTypes||(RequestTypes={}));var PatchedModel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.$isPersisted=!1,e}return __extends(e,t),e.fetchAll=function(t,e){return void 0===e&&(e=!1),__awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,void 0]})})},e.fetch=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,void 0]})})},e.prototype.$put=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,void 0]})})},e.prototype.$persist=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,void 0]})})},e.prototype.$destroy=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,void 0]})})},e.prototype.$deleteAndDestroy=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,void 0]})})},e}(Model$1),Context$1=function(){function t(t,e){if(this.models=new Map,this.debugMode=!1,this.components=t,this.options=e,this.database=e.database,this.debugMode=Boolean(e.debug),this.logger=new Logger(this.debugMode),!e.database)throw new Error("database param is required to initialize vuex-orm-rest!")}return t.getInstance=function(){return this.instance},t.setup=function(e,r){this.instance=new t(e,r);var n=r.baseURL,o=r.headers;return this.instance.axios=axios$1.create({baseURL:n,headers:o}),this.instance.collectModels(),this.instance.logger.group("Context setup"),this.instance.logger.log("components",this.instance.components),this.instance.logger.log("options",this.instance.options),this.instance.logger.log("database",this.instance.database),this.instance.logger.log("models",this.instance.models),this.instance.logger.groupEnd(),this.instance},t.prototype.getModel=function(t,e){if(void 0===e&&(e=!1),"string"==typeof t){var r=singularize(downcaseFirstLetter(t));if(t=this.models.get(r),!e&&!t)throw new Error("No such model "+r+"!")}return t},t.prototype.collectModels=function(){var t=this;this.database.entities.forEach(function(e){var r=new Model(e.model);t.models.set(r.singularName,r),Model.augment(r)})},t}(),Store=function(){function t(){}return t.insertData=function(t,e){return __awaiter(this,void 0,void 0,function(){var r,n=this;return __generator(this,function(o){switch(o.label){case 0:return r={},[4,Promise.all(Object.keys(t).map(function(o){return __awaiter(n,void 0,void 0,function(){var n,i;return __generator(this,function(s){switch(s.label){case 0:return n=t[o],Context$1.getInstance().logger.log("Inserting records",n),[4,e("insertOrUpdate",{data:n})];case 1:return i=s.sent(),Object.keys(i).forEach(function(t){r[t]||(r[t]=[]),r[t]=r[t].concat(i[t])}),[2]}})})}))];case 1:return o.sent(),[2,r]}})})},t}(),Fetch=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.call=function(t,e,r){var n=t.state,o=t.dispatch;return __awaiter(this,void 0,void 0,function(){var t,r;return __generator(this,function(i){switch(i.label){case 0:return t=this.getModelFromState(n),[4,this.$request(RequestTypes.GET,t.baseModel.REST_ENDPOINT+"/"+e)];case 1:return r=i.sent(),[2,Store.insertData(r.data,o)]}})})},e}(Action),Persist=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.call=function(t,e,r){var n=t.state,o=t.dispatch;return __awaiter(this,void 0,void 0,function(){var t,r;return __generator(this,function(i){switch(i.label){case 0:return t=this.getModelFromState(n),[4,this.$request(RequestTypes.POST,t.baseModel.REST_ENDPOINT,e)];case 1:return r=i.sent(),[2,Store.insertData(r.data,o)]}})})},e}(Action),Destroy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.call=function(t,e,r){var n=t.state,o=t.dispatch;return __awaiter(this,void 0,void 0,function(){var t,r;return __generator(this,function(i){switch(i.label){case 0:return t=this.getModelFromState(n),[4,this.$request(RequestTypes.DELETE,t.baseModel.REST_ENDPOINT+"/"+e)];case 1:return r=i.sent(),[2,Store.insertData(r.data,o)]}})})},e}(Action),FetchAll=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.call=function(t,e){var r=t.state,n=t.dispatch;return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(o){switch(o.label){case 0:return t=this.getModelFromState(r),[4,this.$request(RequestTypes.GET,t.baseModel.REST_ENDPOINT)];case 1:return e=o.sent(),[2,Store.insertData(e.data,n)]}})})},e}(Action),VuexORMReST=function(){function t(e,r){Context.setup(e,r),t.setupActions(),t.setupModelMethods()}return t.setupActions=function(){var t=Context.getInstance();t.components.Actions.fetchAll=FetchAll.call.bind(FetchAll),t.components.Actions.fetch=Fetch.call.bind(Fetch),t.components.Actions.persist=Persist.call.bind(Persist),t.components.Actions.destroy=Destroy.call.bind(Destroy)},t.setupModelMethods=function(){var t=Context.getInstance();t.components.Model.fetch=function(t,e){return void 0===e&&(e=!1),__awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(n){return isPlainObject(r=t)||(r={id:t}),[2,this.dispatch("fetch",{filter:r,bypassCache:e})]})})},t.components.Model.fetchAll=function(t,e){return void 0===e&&(e=!1),__awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(n){return isPlainObject(r=t)||(r={id:t}),[2,this.dispatch("fetchAll",{filter:r,bypassCache:e})]})})};var e=t.components.Model.prototype;e.$persist=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,this.$dispatch("persist",{id:this.$id,args:t})]})})},e.$put=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,this.$dispatch("put",{data:this,args:t})]})})},e.$destroy=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,this.$dispatch("destroy",{id:this.$id})]})})},e.$deleteAndDestroy=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.$delete()];case 1:return t.sent(),[2,this.$destroy()]}})})}},t.prototype.getContext=function(){return Context.getInstance()},t}(),VuexORMReSTPlugin=function(){function t(){}return t.install=function(e,r){return t.instance=new VuexORMReST(e,r),t.instance},t}();export default VuexORMReSTPlugin;
//# sourceMappingURL=vuex-orm-rest.es5.js.map
